<script type="text/javascript">
	/* *********Declare variables for address validation using craftclick extension: 16-12-15***********************/
	//<![CDATA[
	 var _cp_integrate = true; var _cp_enable_for_uk_only = true; var _cp_button_image = ''; var _cp_button_text = 'Look up address'; var _cp_button_class = 'button'; var _cp_result_box_height = '5'; var _cp_result_box_width	= ''; var _cp_busy_img_url	= ''; var _cp_clear_result = false; var _cp_hide_result = true; var _cp_1st_res_line = '----- please select your address ----'; var _cp_err_msg1 = 'This postcode could not be found, please try again or enter your address manually'; var _cp_err_msg2 = 'This postcode is not valid, please try again or enter your address manually'; var _cp_err_msg3 = 'Unable to connect to address lookup server, please enter your address manually'; var _cp_err_msg4 = 'An unexpected error occured, please enter your address manually'; var _cp_token_fe = '4c3bd-482ea-573d3-00be6'; var _cp_hide_fields = false; var _cp_hide_county = true; var _cp_error_class = 'error';
	//]]>

	jQuery(document).ready(function(){
			jQuery("#postcode").keypress(function(event){
				if(event.keyCode == 13){
					event.preventDefault();
					return false;
				}
		});
	});         
                
/* *********************************
 *  POST CODE CHECKER CODE START
 *********************************/
 
            var locations = jQuery.parseJSON('{"AL%":0,"BR%":0,"CM%":0,"CR%":0,"CT%":0,"DA%":0,"E%":0,"EC%":0,"EN%":0,"GU%":0,"HA%":0,"HP%":0,"IG%":0,"LU%":0,"ME%":0,"MK%":0,"N%":0,"NW%":0,"OX%":0,"PO1%":0,"RG%":0,"RH%":0,"RM%":0,"SE%":0,"SG%":0,"SL%":0,"SM%":0,"SO%":0,"SS%":0,"SW%":0,"TN%":0,"TW%":0,"UB%":0,"W%":0,"WC%":0,"WD%":0,"BN%":0,"KT%":0,"BA%":0,"BB%":0,"BD%":0,"BH%":0,"BL%":0,"BS%":0,"CB%":0,"CH%":0,"CO%":0,"CV%":0,"CW%":0,"DE%":0,"DN%":0,"DT%":0,"DY%":0,"FY%":0,"GL%":0,"HD%":0,"HR%":0,"HU%":0,"HX%":0,"IP%":0,"L%":0,"LE%":0,"LN%":0,"LS%":0,"M%":0,"NG%":0,"NN%":0,"NR%":0,"OL%":0,"PE%":0,"PR%":0,"S%":0,"SK%":0,"SN%":0,"SP%":0,"ST%":0,"TF%":0,"WA%":0,"WF%":0,"WN%":0,"WR%":0,"WS%":0,"WV%":0,"YO%":0,"HG%":0,"CA%":0,"CF%":0,"DG%":0,"DH%":0,"DL%":0,"EH%":0,"EX%":0,"GA%":0,"KA%":70,"KY%":70,"LA%":0,"LD%":0,"LL%":0,"ML%":70,"NE%":0,"NP%":0,"PL%":0,"SA%":0,"SR%":0,"TA%":0,"TD%":0,"TQ%":0,"TR1%":0,"TS%":0,"AB%":70,"DD%":70,"FK%":70,"IV%":70,"KW%":70,"PH1":70,"PH2":70,"PH3":70,"PH4":70,"PH5":70,"PH6":70,"PH7":70,"PH8":70,"PH9":70,"PH10":70,"PH11":70,"PH12":70,"PH13":70,"PH14":70,"PH15":70,"PH16":70,"PH17":70,"PH18":70,"PH19":70,"PH20":70,"PH21":70,"PH22":70,"PH23":70,"PH24":70,"PH25":70,"PH26":70,"PH27":70,"PH28":70,"PH29":70,"PH30":70,"PH31":70,"PH32":70,"PH33":70,"PH34":70,"PH35":70,"PH36":70,"PH37":70,"PH38":70,"PH39":70,"PH40":70,"PH41":70,"PH42":70,"PH43":70,"PH44":70,"PH45":70,"PH46":70,"PH47":70,"PH48":70,"PH49":70,"PH50":70,"SY%":0,"PA1%":70,"PO35%":54,"PO36%":54,"PO37%":54,"PO38%":54,"PO39%":54,"PO40%":54,"PO41%":54,"G%":70,"PO34%":54,"PO33%":54,"PO32%":54,"PO31%":54,"PO30%":54,"B0%":0,"B1%":0,"B2%":0,"B3%":0,"B4%":0,"B5%":0,"B6%":0,"B7%":0,"B8%":0,"B9%":0,"BT%":350,"HS%":10,"IM%":200,"KA27%":0,"KW1%":70,"KW10%":70,"KW11%":70,"KW12%":70,"KW13%":70,"KW14%":70,"KW15%":70,"KW16%":70,"KW2%":70,"KW3%":70,"KW4%":70,"KW5%":70,"KW6%":70,"KW7%":70,"KW8%":70,"KW9%":70,"PA10%":70,"PA11%":70,"PA12%":70,"PA13%":70,"PA14%":70,"PA15%":70,"PA16%":70,"PA17%":70,"PA18%":70,"PA19%":70,"PA2%":70,"PA20%":70,"PA21%":70,"PA22%":70,"PA23%":70,"PA24%":70,"PA25%":70,"PA26%":70,"PA27%":70,"PA28%":70,"PA29%":70,"PA3%":70,"PA30%":70,"PA31%":70,"PA32%":70,"PA33%":70,"PA34%":70,"PA35%":70,"PA36%":70,"PA37%":70,"PA38%":70,"PA4%":70,"PA41%":70,"PA42%":70,"PA43%":70,"PA44%":70,"PA45%":70,"PA46%":70,"PA47%":70,"PA48%":70,"PA49%":70,"PA5%":70,"PA6%":70,"PA60%":70,"PA61%":70,"PA62%":70,"PA63%":70,"PA64%":70,"PA65%":70,"PA66%":70,"PA67%":70,"PA68%":70,"PA69%":70,"PA7%":70,"PA70%":70,"PA71%":70,"PA72%":70,"PA73%":70,"PA74%":70,"PA75%":70,"PA76%":70,"PA77%":70,"PA78%":70,"PA8%":70,"PA9%":70,"PO10%":0,"PO11%":0,"PO12%":0,"PO13%":0,"PO14%":0,"PO15%":0,"PO16%":0,"PO17%":0,"PO18%":0,"PO19%":0,"PO2%":0,"PO20%":0,"PO21%":0,"PO22%":0,"PO23%":0,"PO24%":0,"PO25%":0,"PO26%":0,"PO27%":0,"PO28%":0,"PO29%":0,"PO3%":0,"PO4%":0,"PO5%":0,"PO6%":0,"PO7%":0,"PO8%":0,"PO9%":0,"TR%":0,"ZE%":100,"JE%":200,"GY%":200}');

	jQuery('#calculate').click(function() {
			
                    jQuery('#deliverycode').html('');
                    var postcode = jQuery('#postcode').val().toUpperCase();
					var postcode_org = jQuery('#postcode').val().toUpperCase();
					
                    postcode1 = postcode.substring(0, 1);
                    postcode2 = postcode.substring(0, 2);
                    postcode3 = postcode.substring(0, 3);
                    postcode4 = postcode.substring(0, 4);
                    if(postcode1=='E') {
                            if(postcode2 == 'EC' || postcode2 == 'EN' || postcode2 == 'EH' || postcode2 == 'EX') {
                                    postcode = postcode2;
                            } else {
                                    postcode = postcode1;
                            }
                    } else if(postcode1=='W') {
                            if(postcode2 == 'WC' || postcode2 == 'WD' || postcode2 == 'WA'|| postcode2 == 'WF'|| postcode2 == 'WN'|| postcode2 == 'WR'|| postcode2 == 'WS'|| postcode2 == 'WV') {
                                    postcode = postcode2;
                            } else {
                                    postcode = postcode1;
                            }
                    } else if(postcode1=='L') {
                            if(postcode2 == 'LU' || postcode2 == 'LE' || postcode2 == 'LN' || postcode2 == 'LS' || postcode2 == 'LA' || postcode2 == 'LD' || postcode2 == 'LL') {
                                    postcode = postcode2;
                            } else {
                                    postcode = postcode1;
                            }
                    } else if(postcode1=='M') {
                            if(postcode2 == 'ME' || postcode2 == 'MK' || postcode2 == 'ML') {
                                    postcode = postcode2;
                            } else {
                                    postcode = postcode1;
                            }
                    } else if(postcode1=='S') {
                            if(postcode2 == 'SE' || postcode2 == 'SG' || postcode2 == 'SL' || postcode2 == 'SM' || postcode2 == 'SO' || postcode2 == 'SS' || postcode2 == 'SW' || postcode2 == 'SK' || postcode2 == 'SN'  || postcode2 == 'SP' || postcode2 == 'ST' || postcode2 == 'SA' || postcode2 == 'SR' || postcode2 == 'SY') {
                                    postcode = postcode2;
                            } else {
                                    postcode = postcode1;
                            }
                    } else if(postcode1=='N') {
                            if(postcode2 == 'NW' || postcode2 == 'NG' || postcode2 == 'NN' || postcode2 == 'NR' || postcode2 == 'NE' || postcode2 == 'NP') {
                                    postcode = postcode2;
                            } else {
                                    postcode = postcode1;
                            }
                    } else if(postcode1=='T') {
                            if(postcode3 == 'TR1') {
                                    postcode = postcode3;
                            } else {
                                    postcode = postcode2;
                            }
                    } else if(postcode3 == 'PH1' || postcode3 == 'PH2' || postcode3 == 'PH3' || postcode3 == 'PH4' || postcode3 == 'PH5' || postcode3 == 'PH6' || postcode3 == 'PH7' ||postcode3 == 'PH8' || postcode3 == 'PH9') {
                            var flag = 0;
                            for(var j=10;j<=50;j++) {
                                    if(postcode4 == 'PH'+j){
                                            postcode = postcode4;
                                            flag = 1;
                                            break;
                                    }
                            }
                            if(flag == 0) {
                                    postcode = postcode3;
                            }
                    } else if(postcode3 == 'PA1' || postcode3 == 'PA2' || postcode3 == 'PA3' || postcode3 == 'PA4' || postcode3 == 'PA5' || postcode3 == 'PA6' || postcode3 == 'PA7' || postcode3 == 'PA8' || postcode3 == 'PA9') {
                            var flag = 0;
                            for(var j=10;j<=78;j++) {
                                    if(postcode4 == 'PA'+j){
                                            postcode = postcode4;
                                            flag = 1;
                                            break;
                                    }
                            }
                            if(flag == 0) {
                                    postcode = postcode3;
                            }
                    } else if(postcode3 == 'PO1' || postcode3 == 'PO2' || postcode3 == 'PO3' || postcode3 == 'PO4' || postcode3 == 'PO5' || postcode3 == 'PO6' || postcode3 == 'PO7' ||postcode3 == 'PO8' || postcode3 == 'PO9') {
                            var flag = 0;
                            for(var j=10;j<=41;j++) {
                                    if(postcode4 == 'PO'+j){
                                            postcode = postcode4;
                                            flag = 1;
                                            break;
                                    }
                            }
                            if(flag == 0) {
                                    postcode = postcode3;
                            }
                    } else if(postcode3 == 'KW1' || postcode3 == 'KW2' || postcode3 == 'KW3' || postcode3 == 'KW4' || postcode3 == 'KW5' || postcode3 == 'KW6' || postcode3 == 'KW7' ||postcode3 == 'KW8' || postcode3 == 'KW9') {
                            var flag = 0;
                            for(var j=10;j<=16;j++) {
                                    if(postcode4 == 'KW'+j){
                                            postcode = postcode4;
                                            flag = 1;
                                            break;
                                    }
                            }
                            if(flag == 0) {
                                    postcode = postcode3;
                            }
                    } else if(postcode2 == 'KA') {
                            if(postcode4 == 'KA27') {
                                    postcode = postcode4;
                            } else {
                                    postcode = postcode2;
                            }
                    } else {
                            postcode = postcode2;
                    }
                    noContactNeeded = true;

                   var needContact = new Array("AL","BR","CM","CR","CT","DA","E","EC","EN","GU","HA","HP","IG","LU","ME","MK","N","NW","OX","PO1","RG","RH","RM","SE","SG","SL","SM","SO","SS","SW","TN","TW","UB","W","WC","WD","BN","KT","BA","BB","BD","BH","BL","BS","CB","CH","CO","CV","CW","DE","DN","DT","DY","FY","GL","HD","HR","HU","HX","IP","L","LE","LN","LS","M","NG","NN","NR","OL","PE","PR","S","SK","SN","SP","ST","TF","WA","WF","WN","WR","WS","WV","YO","HG","CA","CF","DG","DH","DL","EH","EX","GA","KA","KY","LA","LD","LL","ML","NE","NP","PL","SA","SR","TA","TD","TQ","TR1","TS","AB","DD","FK","IV","KW","PH1","PH2","PH3","PH4","PH5","PH6","PH7","PH8","PH9","PH10","PH11","PH12","PH13","PH14","PH15","PH16","PH17","PH18","PH19","PH20","PH21","PH22","PH23","PH24","PH25","PH26","PH27","PH28","PH29","PH30","PH31","PH32","PH33","PH34","PH35","PH36","PH37","PH38","PH39","PH40","PH41","PH42","PH43","PH44","PH45","PH46","PH47","PH48","PH49","PH50","SY","PA1","PO35","PO36","PO37","PO38","PO39","PO40","PO41","G","PO34","PO33","PO32","PO31","PO30","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BT","HS","IM","KA27","KW1","KW10","KW11","KW12","KW13","KW14","KW15","KW16","KW2","KW3","KW4","KW5","KW6","KW7","KW8","KW9","PA10","PA11","PA12","PA13","PA14","PA15","PA16","PA17","PA18","PA19","PA2","PA20","PA21","PA22","PA23","PA24","PA25","PA26","PA27","PA28","PA29","PA3","PA30","PA31","PA32","PA33","PA34","PA35","PA36","PA37","PA38","PA4","PA41","PA42","PA43","PA44","PA45","PA46","PA47","PA48","PA49","PA5","PA6","PA60","PA61","PA62","PA63","PA64","PA65","PA66","PA67","PA68","PA69","PA7","PA70","PA71","PA72","PA73","PA74","PA75","PA76","PA77","PA78","PA8","PA9","PO10","PO11","PO12","PO13","PO14","PO15","PO16","PO17","PO18","PO19","PO2","PO20","PO21","PO22","PO23","PO24","PO25","PO26","PO27","PO28","PO29","PO3","PO4","PO5","PO6","PO7","PO8","PO9","TR","ZE","JE","GY");
					for ( var i=0; i<needContact.length; i++) {
                            if (postcode.indexOf(needContact[i]) == 0) {
                                    jQuery('#deliverycode').html('<span class="border">We&#39;d love to deliver to your area.</span>');
                            }
                    }
                    // Do not delvier array - Palak
                    var dndflag = false;
					var DND = new Array("PH41","PH42","PH43","PH44","IV41","IV42","IV43","IV44","IV45","IV46","IV47","IV48","IV49","IV51","IV56","IV55","TR21","TR22","TR23","TR24","TR25","KA27","KW15","KW16","KW17","PA60","PA61","PA47","PA48","PA49","PA43","PA42","PA44","PA45","PA46","PA77","PA78","PA34","PA62","PA63","PA64","PA65","PA66","PA67","PA68","PA69","PA70","PA71","PA72","PA73","PA74","PA75","PA76","PA77","PA78")
                    
                    for ( var i=0; i<DND.length; i++) {
						if (postcode_org ==  DND[i]) {
								jQuery('#deliverycode').html('<span class="border">We do not deliver to this postcode, please call our customer services team to discuss delivery options.</span>');
								dndflag = true; 
								break;
						}
                    }
										
					if (dndflag==false && noContactNeeded){
                            lastMatch = '';
                                    for ( i in locations) {
                                            search = i.replace('%','');
                                            if (postcode.indexOf(search) == 0 && search.length > lastMatch.length) {
                                                    cost = locations[i].toFixed(0).toString();
                                                    if (cost == 0) {
                                                            jQuery('#deliverycode').html('<span class="border">Delivery is free.</span>');
                                                    } else if (cost == 54){
                                                            //jQuery('#deliverycode').html('<span class="border">We don&#39;t ship here as standard. However, if you give us a call we can arrange this for you via our delivery carrier for &pound;'+cost+'.00.</span>');
                                                            jQuery('#deliverycode').html('<span class="border">We don&#39;t deliver directly to the Isle of Wight. However, if you give us a call we can discuss delivery to a shipping port of your choice.</span>');
                                                    } else {
														
															if(search == "ZE") {
																	jQuery('#deliverycode').html('<span class="border">We don&#39;t deliver directly to the Shetland Islands. However, if you give us a call we can discuss delivery to a shipping port of your choice.</span>');
															} else if (search == "JE") {
																	jQuery('#deliverycode').html('<span class="border">We don&#39;t deliver directly to Jersey. However, if you give us a call we can discuss delivery to a shipping port of your choice.</span>');
															} else if (search == "IM") {
																	jQuery('#deliverycode').html('<span class="border">We don&#39;t deliver directly to the Isle of Man. However, if you give us a call we can discuss delivery to a shipping port of your choice.</span>');
															} else if (search == "HS") {
																	jQuery('#deliverycode').html('<span class="border">We don&#39;t deliver directly to the Outer Hebrides. However, if you give us a call we can discuss delivery to a shipping port of your choice.</span>');
															} else if (search == "BT") {
																	jQuery('#deliverycode').html('<span class="border">We don&#39;t deliver directly to Northern Ireland. However, if you give us a call we can discuss delivery to a shipping port of your choice.</span>');
															} else if (search == "GY") {
																	jQuery('#deliverycode').html('<span class="border">We don&#39;t deliver directly to Guernsey. However, if you give us a call we can discuss delivery to a shipping port of your choice.</span>');
															} else if(search == "ZE") {
																	jQuery('#deliverycode').html('<span class="border">We don&#39;t deliver directly to the Shetland Islands. However, if you give us a call we can discuss delivery to a shipping port of your choice.</span>');
															} else {
																	jQuery('#deliverycode').html('<span class="border">Delivery is:  &pound;'+cost+'.00</span>');
															}
                                                    }
                                                    lastMatch = search;
                                            } 
                                    };						
                         }   
                    });
  
</script>
<?php include 'floodLightTagFooter.php'; $baseurl=Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_WEB); ?>

<script src="<?php echo $baseurl ?>js/crafty_postcode.class.js" type="text/javascript"></script>
<script src="<?php echo $baseurl ?>js/craftyclicks/craftyclicks_onepagecheckout.min.js" type="text/javascript"></script>
<script type="text/javascript">
	var cp_access_token = "4c3bd-482ea-573d3-00be6"; // ***** DON'T FORGET TO PUT YOUR ACCESS TOKEN HERE IN PLACE OF X's !!!! *****
		
var cp_obj_1 = CraftyPostcodeCreate();
		cp_obj_1.set("access_token", cp_access_token); 
		cp_obj_1.set("first_res_line", "----- please select your address ----"); 
		cp_obj_1.set("res_autoselect", "0");
		cp_obj_1.set("result_elem_id", "crafty_postcode_result_display_1");
		cp_obj_1.set("form", "form_brochure");
		cp_obj_1.set("elem_street1"  , "broc[street][0]");
		cp_obj_1.set("elem_street2"  , "broc[street][1]");
		cp_obj_1.set("elem_town"     , "broc[city]");
		cp_obj_1.set("elem_postcode" , "broc[postcode]");
		
		cp_obj_1.set("single_res_autoselect" , 1); // don't show a drop down box if only one matching address is found
		if (1 < _cp_result_box_height) {
			cp_obj_1.set("first_res_line", ""); 
			cp_obj_1.set("max_lines" , _cp_result_box_height);
		} else {
			cp_obj_1.set("first_res_line", "----- please select your address ----"); 
			cp_obj_1.set("max_lines" , 1);
		}
		
		var cp_obj_2 = CraftyPostcodeCreate();
		cp_obj_2.set("access_token", cp_access_token); 
		cp_obj_2.set("first_res_line", "----- please select your address ----"); 
		cp_obj_2.set("res_autoselect", "0");
		cp_obj_2.set("result_elem_id", "crafty_postcode_result_display_2");
		cp_obj_2.set("form", "form_swatches");
		cp_obj_2.set("elem_street1"  , "billing[street][0]");
		cp_obj_2.set("elem_street2"  , "billing[street][1]");
		cp_obj_2.set("elem_town"     , "billing[city]");
		cp_obj_2.set("elem_postcode" , "billing[postcode]");
		
		cp_obj_2.set("single_res_autoselect" , 1); // don't show a drop down box if only one matching address is found
		if (1 < _cp_result_box_height) {
			cp_obj_2.set("first_res_line", ""); 
			cp_obj_2.set("max_lines" , _cp_result_box_height);
		} else {
			cp_obj_2.set("first_res_line", "----- please select your address ----"); 
			cp_obj_2.set("max_lines" , 1);
		}

</script>     
<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magento.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magento.com for more information.
 *
 * @category    design
 * @package     rwd_default
 * @copyright   Copyright (c) 2006-2015 X.commerce, Inc. (http://www.magento.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<div class="footer-container">

	<!-- In a container as this is hidden on all pages part from home and product list -->
	<div class="infobox-container">
		<?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('homepage-infoboxes')->toHtml(); ?>
		<div class="clear"></div>
	</div>

        <div class="guarantee-block">
	<?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('prefooter-guarantee')->toHtml(); ?>
        </div>
        <div class="inspiration-block">            
	<?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('prefooter-inspirartion')->toHtml(); ?>
        </div>
	<?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('prefooter-buying-guides')->toHtml(); ?>
	
	<?php

		$collection = Mage::getSingleton('Mage_Reports_Block_Product_Viewed')->getItemsCollection();

		if(count($collection)){

			echo '<div class="recentlyViewed"><h3 class="horizontalRule beige">Your recently viewed items</h3>';
			echo '<div class="slideshow-container smallScrollButtons">';
			echo '<div class="slideshow-prev"></div>';
			echo '<div class="slideshow-next"></div>';
			echo '<ul class="slideshow slideshowRecentlyViewed">';
			$intProductCount = 0;

			foreach($collection as $_productEach){

				if($intProductCount == 0){
					echo "<li>";
				}

				$intProductCount++;

				$strLink = $_productEach->getProductUrl();
				$strImageURI = $this->helper('catalog/image')->init($_productEach, 'small_image')->keepFrame(false)->resize(300);
				$strTitle = $_productEach->getName();

				echo sprintf('<a href="%s"><img src="%s" alt="%s" title="%s"><span class="recentProductTitle">%s</span></a>',$strLink,$strImageURI,$strTitle,$strTitle,$strTitle);

				if($intProductCount == 5){
					echo "</li>";
					$intProductCount = 0;
				}
			}

			if($intProductCount > 0 && $intProductCount < 5){
				echo "</li>";
			}

			echo '</ul><div class="slideshow-pager-container"><div class="slideshow-pager-recent">&nbsp;</div></div></div></div>';
		}
	?>

    <div class="footer-padding">
        <div class="footer">
            <?php echo $this->getChildHtml() ?>
            <div class="social">
                <?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('footer_social')->toHtml();?>
	            <div class="credit">
		            eCommerce by <a href="http://www.bwebsites.co.uk/" target="_blank">b:web</a> | branding by <a href="http://www.meetbob.co.uk/" target="_blank">meetbob</a>  | integration by <a href="http://www.svaapta-it-ally.com/" target="_blank">SVAAPTA</a>
	            </div>
            </div>
	        <?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('footer-feefo')->toHtml(); ?>
        </div>
    </div>
</div>

<!--<div class="secureCheckoutInfo">
	<ul>
		<li>
			<p>
				<strong>Secure & reliable internet payments</strong><br>
				We accept all major credit and debit cards except American Express.
			</p>
		</li>
		<li>
			<img width="131" height="36" alt="Credit Cards" src="http://www.willowandhall.co.uk/media/wysiwyg/cards_1.jpg">
			<a target="_blank" href="https://www.securitymetrics.com/site_certificate.adp?s=86%2e8%2e8%2e252&i=1138470">
			<img width="54" height="26" alt="Feefo" src="http://www.willowandhall.co.uk/media/wysiwyg/feefo-goldtrusted.png" style="margin-left: 5px;">
		</li>
	</ul>
</div>-->

<!--<strong>Popup Test Links:</strong> <a class="fancybox" href="#inline-chat">Chat</a> |
<a class="fancybox" href="#inline-newsletter">Newsletter</a> |
<a class="fancybox" href="#inline-catalogue">Catalogue</a> |
<a class="fancybox" href="#inline-inrange">Also In Range</a>-->






<div id="inline-chat" class="popupWindow" style="max-width: 550px; display: none;">

	<div class="popupTopLeft"></div>
	<div class="popupTopRight"></div>
	<div class="popupBottomLeft"></div>
	<div class="popupBottomRight"></div>
	<div class="popupTop"></div>
	<div class="popupLeft"></div>
	<div class="popupBottom"></div>
	<div class="popupRight"></div>

	<div class="popupBackground">
		<div class="popupContent">

			<h3><img src="<?php echo $this->getSkinUrl('images/popups/popup-chat-title.png') ?>" alt="WE LOVE A GOOD CHAT" title="WE LOVE A GOOD CHAT"></h3>
			<p><img src="<?php echo $this->getSkinUrl('images/popups/popup-chat-item.png') ?>" alt="Phone Us" title="Phone Us"></p>
			<h4>Call us on 0845 468 0577</h4>
			<p>We can take you order over the phone and discuss any queries or questions you may have.</p>
			<p>We're open at the following times and would love to help you:<br>Monday to Saturday; 9am - 5:30pm<br>Sunday; Snoozing</p>
		        <ul class="messages" id="callbackPopupMessage" style="display: none;">
				<li class="error-msg">
					<ul><li><span class="callbackMessage"></span></li></ul>
				</li>

			</ul>

			<form  action="#" method="post" id="chatPopupForm" onsubmit = "floodLightTagclose();">
		            <h4>Alternatively, let us call you...</h4>
				<input type="text" class="required-entry" name="firstname" id="chatPopupName" value="" placeholder="First name:">
				<input type="text" class="required-entry" name="surname" value="" id="chatPopupLName" placeholder="Last name:">
		                <input type="tel" class="required-entry validate-digits" name="phone" value="" id="chatPopupTel" placeholder="Phone number:">
		                <textarea rows="3" name="message" id="chatPopupMessage" placeholder="Optional Message:"></textarea>
				<button type="submit" class="action">Send My Request</button>
		                <p>We aim to call you back within 1 hour, unless we are closed or snoozing on a Sunday.</p>
			</form>

		</div>
	</div>
</div>




<div id="inline-newsletter" class="popupWindow" style="max-width: 550px; display: none;">

	<div class="popupTopLeft"></div>
	<div class="popupTopRight"></div>
	<div class="popupBottomLeft"></div>
	<div class="popupBottomRight"></div>
	<div class="popupTop"></div>
	<div class="popupLeft"></div>
	<div class="popupBottom"></div>
	<div class="popupRight"></div>

	<div class="popupBackground">
		<div class="popupContent">

			<h3><img src="<?php echo $this->getSkinUrl('images/popups/popup-newsletter-title.png') ?>" alt="NEWSLETTER SIGN UP" title="NEWSLETTER SIGN UP"></h3>
			<p><img src="<?php echo $this->getSkinUrl('images/popups/popup-newsletter-item.png') ?>" alt="Sign Up" title="Sign Up"></p>
			<p>We'll send you a weekly email about Willow &amp; Hall's take on British furniture or to let you know about our new items, special promotions and upcoming competitions.</p>
			<ul class="messages" id="newsletterPopupMessage" style="display: none;">
				<li class="error-msg">
					<ul><li><span class="newsletterMessage"></span></li></ul>
				</li>

			</ul>

			<form action="#" method="post" id="newsletterPopupForm">
				<input type="text" class="required-entry" name="name" id="newsletterPopupName" value="" placeholder="First Name:">
				<input type="text" class="required-entry" name="lastname" id="newsletterPopupLName" value="" placeholder="Last Name:">
				<input type="text" class="required-entry validate-email"   name="email" id="newsletterPopupEmail" value="" placeholder="Email:">
				<button type="submit" class="action" >SIGN UP</button>
				<!--The span class to show the Please wait text while click on the submit button!-->
				<span class="hide-it"></span>
			</form>

			<div class="clear"></div>
		</div>
	</div>
</div>


<?php if (Mage::getSingleton('customer/session')->isLoggedIn()) {

    /* Get the customer data */
    $customer = Mage::getSingleton('customer/session')->getCustomer();
    /* Get the customer's full name */
    $fullname = $customer->getName();
    /* Get the customer's first name */
    $firstname = $customer->getFirstname();
    /* Get the customer's last name */
    $lastname = $customer->getLastname();
    /* Get the customer's email address */
    $email = $customer->getEmail();
	
	if($customer->hasPrimaryBillingAddress())
	{
	
	$phone = $customer->getPrimaryBillingAddress()->getTelephone();
	$address = $customer->getPrimaryBillingAddress()->getStreet();
	$address = $address[0];
	$city = $customer->getPrimaryBillingAddress()->getCity();
	$postcode = $customer->getPrimaryBillingAddress()->getPostcode();
	} 
} ?>
<!--Catalogue popup-->
<div id="inline-catalogue" class="popupWindow" style="max-width: 550px; display: none;">

	<div class="popupTopLeft"></div>
	<div class="popupTopRight"></div>
	<div class="popupBottomLeft"></div>
	<div class="popupBottomRight"></div>
	<div class="popupTop"></div>
	<div class="popupLeft"></div>
	<div class="popupBottom"></div>
	<div class="popupRight"></div>

	<div class="popupBackground">
		<div class="popupContent">

			<div class="bro_div">
			<h3><img src="<?php echo $this->getSkinUrl('images/popups/popup-catalogue-title.png') ?>" alt="ORDER MY CATALOGUE" title="ORDER MY CATALOGUE"></h3>
			<p><img width="40%" src="<?php echo $this->getSkinUrl('images/popups/popup-catalogue-item.png') ?>" alt="Get our Catalogue" title="Get our Catalogue"></p>
<!--
			<a href="pdf/W&H_A5_CATALOGUE_OCT_2015.pdf" target="_blank" class="button action">Download Catalogue</a>
-->
			<!--<p>pop your details in the boxes below for one to be send in the post</p>-->
			<p>Please enter your details to receive or download a FREE copy of our latest catalogue</p>
			<form id="form_brochure" name="form_brochure"  method="post" onSubmit="return false;">
			<input type="text" class="required-entry" name="firstname" id="catfname" value="<?php if(isset($firstname)) echo  $firstname;?>" placeholder="First name*">
				<span class="validation-advice" id="fname-catalogue"></span>
			<input type="text" class="required-entry" name="lastname" id="catlname" value="<?php if(isset($lastname)) echo  $lastname;?>" placeholder="Last name*">
				<span class="validation-advice" id="lname-catalogue"></span>
			<input type="text" name="phone" class="validate-phoneLax" value="<?php if(isset($phone)) echo  $phone;?>" placeholder="Phone number">
			<input type="text" class="required-entry validate-email" name="email" id="catemail" value="<?php if(isset($email)) echo  $email;?>" placeholder="Email address*">
				<span class="validation-advice" id="email-catalogue"></span>

				<input type="text" style="display: none" tabindex="5" class="order required-entry broc-street1" title="Street Address 1" name="broc[street][0]" id="broc:street1" value="<?php if(isset($address)) echo  $address;?>" placeholder="Street Address 1*"/>
				<input type="text" style="display: none" tabindex="6" class="order street2 broc-street2" title="Street Address 2" name="broc[street][1]" id="broc:street2" value="" class="input-text onestepcheckout-address-line" placeholder="Street Address 2"/>
				<input type="text" style="display: none" tabindex="7" name="broc[city]" value="<?php if(isset($city)) echo  $city;?>" title="City" class="order required-entry broc-city" id="broc:city" placeholder="City*" />

				<input type="hidden" name="broc[country_id]" id="broc:country_id" value="GB" />
				<input type="hidden" name="broc[save_in_address_book]" value="1" />
				<input type="hidden" name="isAjax" value="1" />
				<input type="hidden" class="is_validated" name="is_validated" value="0" />

				<input type="hidden" name="order" value="">
							<input type="hidden" class="bypass" name="bypass" value="0" />
				<input type="text" id="postcode" name="broc[postcode]" class="required-entry validate-zip-international " value="<?php if(isset($postcode)) echo  $postcode;?>" placeholder="Postcode*">
				<span id="show-it" class="postcode_result_display" ></span>
				<div id="crafty_postcode_result_display_1" class="postcode_result_display" style="line-height: initial;" >&nbsp;</div>
				<button id="postcode" type="button" onclick="checkpostcode() " class="button pink" >Look up address</button>


				<!--<a href="#" class="button pink">Look up address</a>-->

				<!--<a href="#">Enter Address Manually</a>-->

				<p style="clear:both;" id="show_progress_text"><button type="submit" class="action" id="brochure-submit" onClick="showAddressBoxes1();ajaxbrochure();floodLightTagForBroucheropen();"   name="submit">Send me my Cosy Catalogue</button></p>
			</form>
			<button type="submit" name = "downloadcatalogue" onClick="downloadcatalog();floodLightTagForBroucheropen();" id="downloadcatalog" class="button action" > Click here to download your catalogue</button>
		<form id="downloadForm" method="POST" action="/pdf/download.php" style="visibility: hidden"></form> 
		</div>
	</div>
</div>
<script type="text/javascript">

function checkpostcode()
{
		var pvalue = document.getElementById("postcode").value;
		if(!pvalue)
		{
		document.getElementById("crafty_postcode_result_display_1").hide();
		document.getElementById("show-it").show();
		document.getElementById("show-it").innerHTML = "Please enter postcode or enter your address manually";
		document.getElementById("crafty_postcode_result_display_1").hide();
		showAddressBoxes();
		}
		else
		{
		document.getElementById("show-it").hide();
		cp_obj_1.doLookup();
		showAddressBoxes();
		}
}
function showAddressBoxes1(){
	jQuery('.broc-street1').show();
	jQuery('.broc-street2').show();
	jQuery('.broc-city').show();
}
function showAddressBoxes(){
	jQuery('.broc-street1').show();
	jQuery('.broc-street2').show();
	jQuery('.broc-city').show();
	$j.fancybox("#inline-catalogue").resize();
}

function downloadcatalog(){
		//alert('test');
		jQuery("#advice-required-entry-catfname").hide();
		var fname = document.getElementById("catfname").value;
		var lname = document.getElementById("catlname").value;
		var email = document.getElementById("catemail").value;
		jQuery(".validation-advice").hide();
		var flag = true;
		
		if(email == ""){
			document.form_brochure.email.focus() ;
			jQuery("#email-catalogue").show();
			document.getElementById("email-catalogue").innerHTML = "This is a required field.";
			flag = false;
		} 
		else{
			if (!(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(email))) {  
				document.form_brochure.email.focus() ;
			jQuery("#email-catalogue").show();
			document.getElementById("email-catalogue").innerHTML = "Please enter a valid email address. For example johndoe@domain.com.";
			flag = false;
			}
		}
		if(lname == ""){
			document.form_brochure.lastname.focus() ;
			jQuery("#lname-catalogue").show();
			document.getElementById("lname-catalogue").innerHTML = "This is a required field.";
			flag = false;
		}
		if(fname == ""){
			document.form_brochure.firstname.focus() ;
			jQuery("#fname-catalogue").show();
			document.getElementById("fname-catalogue").innerHTML = "This is a required field.";
			flag = false;
		}
		
		if(flag == false){
			
			return false;
			
		}else{ 
			jQuery("#downloadcatalog").attr('disabled','disabled');
			var fd=jQuery('#form_brochure').serialize();
			jQuery.ajax({
       		type: "POST",
      	    cache: false,
			url: '<?php echo $this->getUrl();?>index.php/requester/Brochure/download',
			data:fd,
			dataType: 'json',
        	success: function(result) {
				
				jQuery(".bro_div").hide();
					jQuery(".first-class").hide();
					jQuery('#catalog-download').show();
					//jQuery('#inline-catalogue').css("height","200px");
					//jQuery('.fancybox-inner').css("height","210px");
					jQuery('.fancybox-skin').css("height","350px");
					
					jQuery("#downloadForm").submit();
					//document.getElementById("downloadcatalog").disabled=true;
					jQuery("#downloadcatalog").removeAttr('disabled');
				},
				error: function(error) {
					jQuery('.fail').show();
					}
			});
		}
	}
</script>
<div class="sucess" style="display:none; background-color:#FFF; padding: 20px; font-size: 16px; text-align: center; margin-top: -20px;">
	We're really delighted that you've ordered a copy of the W&H cosy catalogue. We hope that you find it helpful and enjoy reading about our British Brand and browsing our complete collection.<br>
	Hopefully, hidden in our catalogue is the perfect W&H design for your home!<br><br>
	<span style="font-size: 18px;">Happy browsing,<br>Sarah & All The Willow & Hallers</span>
</div>
<div id="catalog-download" style="display:none; background-color:#FFF; padding: 20px; font-size: 16px; text-align: center; margin-top: -20px;">
	We're really delighted that you've download a copy of the W&H cosy catalogue. We hope that you find it helpful and enjoy reading about our British Brand and browsing our complete collection.<br>
	Hopefully, hidden in our catalogue is the perfect W&H design for your home!<br><br>
	<span style="font-size: 18px;">Happy browsing,<br>Sarah & All The Willow & Hallers</span>
</div>
<div class="fail" style="display:none; background-color:#FFF; color:red;">There is an error in process of your request try again later.</div>
</div>
<!--Catalogue popup:end-->

<div id="inline-inrange" class="popupWindow" style="max-width: 700px; display: none;">

	<div class="popupTopLeft"></div>
	<div class="popupTopRight"></div>
	<div class="popupBottomLeft"></div>
	<div class="popupBottomRight"></div>
	<div class="popupTop"></div>
	<div class="popupLeft"></div>
	<div class="popupBottom"></div>
	<div class="popupRight"></div>

	<div class="popupBackground">
		<div class="popupContent">

			<h3>The Elmley 2 Seater Sofa Bed in House Linen Oyster has been added to your basket</h3>
			<h2>Also available in this range</h2>
			<ul>
				<li>[Item 1]</li>
				<li>[Item 2]</li>
				<li>[Item 3]</li>
				<li>[Item 4]</li>
			</ul>
			<hr>
			<a href="#" class="button action">Continue shopping</a>
			<a href="#" class="button action pink">Checkout</a>

		</div>
	</div>
</div>
<script type="text/javascript">

//< ![CDATA[
var myBrochure= new VarienForm('form_brochure', true);
//]]>
  
function ajaxbrochure(){
	jQuery("#fname-catalogue").hide();
	jQuery("#lname-catalogue").hide();
	jQuery("#email-catalogue").hide();
	if(myBrochure.validator.validate()){    
	
	jQuery("body").prepend('<div id="product_extra_image_ajax_load"></div>');
	 jQuery("#brochure-submit").attr('disabled','disabled');
	
	// ga('send', 'event', 'Brochure', 'Requested');//IMPORTANT: IN DEV SITE IT MUST BE IN COMMENT, IN LIVE SITE IT MUST NOT BE IN COMMENT
	//_gaq.push(['_trackEvent', 'Brochure', 'Requested']);

	
	//var fd = new FormData(document.getElementById('form_brochure'));
	
	var fd=jQuery('#form_brochure').serialize();
	
	jQuery.ajax({
		 type: "POST",
         cache: false,
			//processData: false,
			//contentType: "text/json; charset=utf-8",			
			//contentType: false, 
         
        url: '<?php echo $this->getUrl();?>requester/SwatchRequest/googleValidation',
        data:fd,
		dataType: 'json',
      
        success: function(data) {//alert("Data in success"+data);
        var toAppend = '';
        console.log('DataLength'+data.length);
		if(data.length>1)
		{   
    		for(var i=0;i<data.length;i++){
            	toAppend += '<option>'+data[i]+'</option>';
        	}
			//alert(toAppend);
    	 	jQuery("#populateaddress").html(toAppend);
    	 	var left = (screen.width/2)-(320/2);
		    //var top = (screen.height/2)-(320/2);
		    //jQuery(".addregion").css('top',top);
		    jQuery(".addregion").css('left',left);
		  	jQuery(".addregion").show();	
		  	jQuery(".broc_cp_result_display").hide();
		  	jQuery("#simplemodal-overlay-popup5").show();
			jQuery('#product_extra_image_ajax_load').remove();
			jQuery("#brochure-submit").removeAttr('disabled');
		 
		}
		else if(data.length==0)
		{  
			if(jQuery(".bypass").val()==1)
			{
				validateaftercall();
			}
			else
			{
				no_result_action();
				jQuery("#brochure-submit").removeAttr('disabled');
			}
			
		}
		else
		{ 
			jQuery(".is_validated").val('1');
			validateaftercall();
			jQuery("#brochure-submit").hide();
			jQuery("#show_progress_text").html('Please wait while submission is in progress...');
			jQuery("#show_progress_text").css('text-align','center');
			jQuery("#show_progress_text").css('font-family','Georgia');
			jQuery("#show_progress_text").css('color','#666666');

			} 
            //jQuery("#populateaddress").html(data);
        },
        
    error:function (xhr, ajaxOptions, thrownError) {
        console.log(xhr.status);
        console.log(thrownError);
      }
	});
	  
	  
	  jQuery('#product_extra_image_ajax_load').remove();
	}
	
	}
	function no_result_action()
	{
		var left = (screen.width/2)-(320/2);
		var left_in_percent = (left*100)/screen.width;
		var top = (screen.height/2)-(470/2);
		jQuery(".no_result").css('top',top);
		jQuery(".no_result").css('left',left_in_percent+'%');
	  	jQuery(".no_result").show();	
	  	jQuery("#simplemodal-overlay-popup5").show();	
	}
	
	function validateaftercall()
	{
		
		//alert('in validation');
		//var fd = new FormData(document.getElementById('form_brochure'));
		var fd=fd=jQuery('#form_brochure').serialize();
		jQuery.ajax({
       		 type: "POST",
      	     cache: false,
			// processData: false,
			//contentType: "text/json; charset=utf-8",			
		   	//contentType: false, 
//			url: '<?php echo $this->getUrl();?>brochure.php',
			url: '<?php echo $this->getUrl();?>requester/Brochure/index',
			data:fd,
			dataType: 'json',
        	success: function(data) {
				//alert('in success');
				jQuery('#free_brochure_content').css("min-height","20px");
			
				
				console.log(data);if(data){jQuery('.sucess').show();
						jQuery('#inline-catalogue').css("height","280px");
						jQuery('.fancybox-inner').css("height","280px");
						
					jQuery(".bro_div").hide();jQuery(".first-class").hide();}else{jQuery('.fail').show();
			}} 
		}); 
    }
	 
	jQuery(document).ready(function() { 
		/*jQuery("#shipping_cp_button_id").click(function() {
		cp_obj_3.doLookup();
		});*/
		
		jQuery("#crafty_postcode_result_display_1").change(function(){
	
	jQuery("#crafty_postcode_result_display_1").hide();
	});
	jQuery("#crafty_postcode_result_display_2").change(function(){
	
	jQuery("#crafty_postcode_result_display_2").hide();
	});
	jQuery(".google_validate_button_ok").click(function() {

		//alert(jQuery("#populateaddress").val());

		var fulladdr=jQuery("#populateaddress").val();
		var field=[".broc_postcode",".broc_city",".broc_street1",".broc_street2"]
		var res = fulladdr.split(","); 
		//alert(res.length);
		var j=0;
		//alert(jQuery("#broc:postcode").val());

		
		for(var i=(res.length-1);i>=0;i--)
		{
				jQuery(field[j]).val(res[i]);
				//alert(field[j]+": "+jQuery(field[j]).val());
				//alert(res[i]);
				j++;
		}
		jQuery(".is_validated").val('1');
		validateaftercall();
		jQuery(".addregion ,#simplemodal-overlay-popup5").hide();
		
		
		});
	jQuery(".google_validate_button_cancel").click(function() {
		
		validateaftercall();
		jQuery(".addregion ,#simplemodal-overlay-popup5").hide();

	});
	jQuery(".google_validate_button_no_result_ok").click(function() {
		
		jQuery(".no_result").hide();
		jQuery("#simplemodal-overlay-popup5").hide();	
	});
	jQuery( ".google_validate_button_no_result_cancel").click(function() {
		//validateaftercall();
		jQuery(".bypass").val('1');
		jQuery(".no_result,#simplemodal-overlay-popup5").hide();
		jQuery("#brochure-submit").removeAttr('disabled');
		
	});
	
		//alert('Test');		
	
		jQuery("#broc_cp_result_display").change(function(){jQuery("#broc_cp_result_display").hide();});
		/*jQuery("#broc_cp_button_id").click(function(){
			alert();
			jQuery("#broc_cp_result_display").show();});*/
			
			/*******Swatch functions*******/
		jQuery( ".google_validate_button1_cancel").click(function() {
		
		validateswatchaftercall();
		jQuery(".addregion1 ,#simplemodal-overlay-popup5").hide();

		});
		jQuery( ".google_validate_button_no_result_cancel1").click(function() {
		//validateswatchaftercall();
		jQuery(".bypass1").val('1');
		jQuery(".no_result1,#simplemodal-overlay-popup5").hide();
		
	});
	jQuery( ".google_validate_button_no_result_ok1").click(function() {
		//validateswatchaftercall();
		jQuery(".no_result1,#simplemodal-overlay-popup5").hide();
		
	});
	
		jQuery("#billing_cp_result_display").change(function(){jQuery("#billing_cp_result_display").hide();});
		jQuery("#shipping_cp_result_display").change(function(){jQuery("#shipping_cp_result_display").hide();});
		jQuery("#billing_cp_button_id").click(function(){jQuery("#billing_cp_result_display").show();});
			/******Swatch functions:end********/
		
	});
</script>

<!-- no result when postcode is not proper-->
<div class="no_result" style="width:320px;display:none;z-index:99999999;background-color: #FFFFFF;padding: 30px;position: fixed;top:100px;">

Sorry the address is showing as incorrect in our checker.  Please could you double check your street and postcode and edit if necessary before submitting. If your address is valid and it's just our system being naughty apologies for this - please ignore.  <br><br>Best wishes, <br>The Willow and Hall Team.<br>
<button  style="height:70px; width:260px;" class="google_validate_button_no_result_ok google_button" name="ok" id="no_result_ok" >The address I entered <b>is not correct.</b> Take me back to edit my order</button>
<br /><br />
<button  style="height:70px; width:260px;" class="google_validate_button_no_result_cancel google_button" name="cancel" >The address I entered <b>is correct.</b> Take me back to submit my order</button>
</div>
<div class="addregion" style="width:320px;display:none;z-index:99999999;background-color: #FFFFFF;padding: 30px;position: fixed;top:100px;">

YOUR ADDRESS DID NOT MATCHED PLEASE SELECT FROM BELOW:
<br><br>
<select id="populateaddress" size="5"></select>
<br><br>
<button class="google_validate_button_ok google_button" name="ok" style="width:110px;">OK</button>
<button class="google_validate_button_cancel google_button" name="Keep As It is" >Keep As It is</button>
</div>
<div style="display:none;height: 100%; width: 100%; background-color:black;position: fixed; left: 0px; top: 0px; z-index: 10001; opacity: 0.6;" class="simplemodal-overlay" id="simplemodal-overlay-popup5"></div>
<!-- end:no result-->

