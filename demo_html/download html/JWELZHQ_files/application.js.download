function tlite(e){document.addEventListener("mouseover",function(t){var o=t.target,n=e(o);n||(o=o.parentElement,n=o&&e(o)),n&&tlite.show(o,n,!0)}),document.addEventListener("touchstart",function(t){var o=t.target,n=e(o);n||(o=o.parentElement,n=o&&e(o)),n&&tlite.show(o,n,!0)||tlite.hideAll(document.getElementsByClassName("tlite-visible"),!0)})}function number_to_currency(e,t){try{var t=t||{},o=t.precision||0,n=defaultCurrency,a=o>0?t.separator||".":"",i=t.delimiter||",",r=parseFloat(e).toFixed(o).split(".");return o>0?n+number_with_delimiter(r[0],i)+a+r[1].toString():n+number_with_delimiter(r[0],i)}catch(t){return n+e}}function number_with_delimiter(e,t,o){try{var t=t||",",o=o||".",n=e.toString().split(".");return n[0]=n[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+t),n.join(o)}catch(t){return e}}function hypeModal(e){$("#modal_jewlr_modal_content").html('<div class="modal__ad-container"><iframe class="modal__ad" src="https://assets-jewlr.netdna-ssl.com/coll-ad/hype/'+e+"/"+e+'.html" style="width: 100%; height: 100%;" frameborder="0" scrolling="no"></iframe></div>'),$("#modal_jewlr_modal").remodal().open()}function getGoogleExperimentVariation(e){try{var t=0;return"undefined"!=typeof cxApi&&(t=cxApi.getChosenVariation(e),t==cxApi.NO_CHOSEN_VARIATION&&(t=1,cxApi.setChosenVariation(t,e)),void 0!==t&&(setLiveChatVariable("google_experiment_variation",t),t>0&&($(".experiment__variation-0").hide(),$(".experiment__variation-"+t).show()),"undefined"!=typeof FS&&FS.setUserVars({googleExperimentVariation_int:t}))),t}catch(e){return console.log(e),1}}function setLiveChatVariable(e,t){try{void 0===Cookies.get("lc_array")?lc_array=[]:lc_array=Cookies.getJSON("lc_array");for(var o=!1,n=0;n<lc_array.length;n++)lc_array[n].name==e&&(o=!0,lc_array[n].value=t);return o||lc_array.push({name:e,value:t}),"undefined"!=typeof window.__lc?window.__lc.params=lc_array:(window.__lc={},window.__lc.params=lc_array),"undefined"!=typeof LC_API&&"undefined"!=typeof LC_API.set_custom_variables&&LC_API.set_custom_variables(lc_array),Cookies.set("lc_array",lc_array),lc_array}catch(e){return}}function getLiveChatVariables(){return void 0!==Cookies.get("lc_array")?Cookies.getJSON("lc_array"):[]}function generateSourceURL(e,t){try{return t!==undefined&&(-1===e.indexOf("?")&&(e+="?"),e+="&utm_source=jewlrweb",e+="&utm_medium="+encodeURIComponent(t),e+="&utm_content=product_share",null!==(utm_campaign=Cookies.get("utm_campaign"))&&(e+="&utm_campaign="+utm_campaign)),e}catch(e){console.log(e)}}function reportJsError(){}function modalIfCookieUnset(e,t){if(!Cookies.get(t)){var o=$(e).modalBox({iconClose:!0,keyClose:!0,bodyClose:!0,overlay:!0,width:"100%",left:"0",top:"0",height:"100%"});$(o).on("click",function(){$(this).modalBox("close")}),$(o).find("img").on("click",function(e){e.stopPropagation()}),Cookies.set(t,!0,{expires:365})}}function modalNavigation(){$(".remodal").on("opened",function(){$("body").addClass("noscroll"),$(".remodal-wrapper.last-opened").removeClass("last-opened"),$(".remodal-wrapper.just-opened").removeClass("just-opened").addClass("last-opened"),$(this).parent().addClass("just-opened")}),$(".remodal").on("closed",function(){$("body").removeClass("noscroll"),$(".remodal-wrapper.last-opened").removeClass("last-opened"),$(this).parent().removeClass("just-opened").addClass("last-opened")}),$(".remodal-back").on("click",function(){try{$(".remodal-wrapper.last-opened > .remodal").remodal().open()}catch(e){$(".remodal.remodal-is-opened").remodal().close()}})}function earlyBlackFridayABTest(){var e=!1,t=window.location.search.substr(1);if(Cookies.get("bdcoup"))t.indexOf("bdcoup=0"),Cookies.remove("bdcoup");else if(t.indexOf("bdcoup=1")>-1)return Cookies.set("bdcoup",1,{expires:365}),showBdCoup(),void $("#coupon_microbanner").click();e?showBdCoup():showChristmasAvailabilityModal(),$("body").on("click",".jewelry_certificate_link, .jewelry_certificate_link_bold",function(e){e.preventDefault(),$("#jewelry_certificate_modal").modalBox({iconClose:!0,keyClose:!0,bodyClose:!0,overlay:!0,width:"100%",left:"0",top:"0",height:"100%"}),$("#pmodal_cert_video").is(":visible")&&(vid=$("#pmodal_cert_video")[0],vid.defaultPlaybackRate=2,vid.playbackRate=2,vid.play())}),$("#jewelry_certificate_modal").on("click",function(){$(this).modalBox("close"),vid=$("#pmodal_cert_video")[0],vid.pause(),vid.currentTime=0}),$("#pmodal_cert_video").click(function(e){return e.stopPropagation(),$(this)[0].play(),!1})}function showChristmasAvailabilityModal(){$("body").on("click",".christmas_availability",function(e){e.preventDefault(),"true"==$(this).attr("data-guarantee")?$("#esd_bad").hide():$("#esd_good").hide(),$("#christmas_availability_modal").modalBox({iconClose:!0,keyClose:!0,bodyClose:!0,overlay:!0,width:"100%",left:"0",top:"0",height:"100%"}),$("#modal_cert_video").is(":visible")&&(vid=$("#modal_cert_video")[0],vid.defaultPlaybackRate=1,vid.playbackRate=1,vid.play())}),$("#christmas_availability_modal").on("click",function(){$(this).modalBox("close"),vid=$("#modal_cert_video")[0],vid.pause(),vid.currentTime=0}),$("#modal_cert_video").click(function(e){return e.stopPropagation(),$(this)[0].play(),!1})}function showBdCoup(){$("#coupon_microbanner").show(),$("#coupon_microbanner").on("click",function(e){e.preventDefault(),$("#black_friday_modal").modalBox({iconClose:!0,keyClose:!0,bodyClose:!0,overlay:!0,width:"100%",left:"0",top:"0",height:"100%"})}),$("#black_friday_modal").on("click",function(){$(this).modalBox("close")});var e=$("<a />").attr("href","#").html("GET UP TO AN EXTRA 20% OFF >");$(e).on("click",function(e){e.preventDefault(),$("#black_friday_modal").modalBox({iconClose:!0,keyClose:!0,bodyClose:!0,overlay:!0,width:"100%",left:"0",top:"0",height:"100%"})}),$("#header_promo_msg_mobile").html(e)}function reTip(){$(".tipso").off(),$(".tipso").tipso({background:"#191919"})}function getCursorPos(e){el=e.target;var t,o,n,a,i=0,r=0;return"number"==typeof el.selectionStart&&"number"==typeof el.selectionEnd?(i=el.selectionStart,r=el.selectionEnd):(t=document.selection.createRange())&&t.parentElement()==el&&(n=el.value.length,o=el.createTextRange(),o.moveToBookmark(t.getBookmark()),a=el.createTextRange(),a.collapse(!1),o.compareEndPoints("StartToEnd",a)>-1?i=r=n:(i=-o.moveStart("character",-n),r=o.compareEndPoints("EndToEnd",a)>-1?n:-o.moveEnd("character",-n))),{start:i,end:r}}function restoreCursorPos(e,t){if(el=e.target,"number"==typeof el.selectionStart&&"number"==typeof el.selectionEnd)el.selectionStart=t.start,el.selectionEnd=t.end;else{var o=el.createTextRange();o.collapse(!0),t.start==t.end?o.move("character",t.start):(o.moveEnd("character",t.end),o.moveStart("character",t.start)),o.select()}}function initPageHandlers(){$(".navbar__mobile_menu__list_item__link-js").click(function(){$(this).addClass("js-active")}),$(".js-sticky-header").on("click",'#js_menu_toggle:not(".js-search-close"), .js-nav-overlay',function(e){closeCartWishlistAccountDropdowns(),$("#filter_container").hide(),$("#desktop_filter_link i").attr("class","icon-caret-down"),$("#mobile_filter_link").removeClass("active"),$("body").removeClass("noscroll"),$("#mobile_filter_link").is("*")&&$("#mobile_filter_link").hasClass("active")?lastScrollPos=$(document).scrollTop():$("#mobile_filter_link").is("*")&&Modernizr.touch,$("body").hasClass("nav-open")?closeMobileMenu():openMobileMenu(),e.preventDefault()}),$("#js_mobile_menu").on("click",".js-m-nav-open-submenu",function(){return $(this).next(".js-m-nav-submenu").addClass("open"),!1}),$("#js_mobile_menu").on("click",".js-m-submenu-backlink",function(){return $(this).closest(".js-m-nav-submenu").removeClass("open"),!1}),$("#js_mobile_menu").on("click",".js-m-nav-category",function(){return $(this).siblings().find(".js-m-nav-list-dropdown").slideUp(),$(this).find(".js-m-nav-list-dropdown").slideToggle(),$(this).toggleClass("open"),$(this).siblings().removeClass("open"),!1}).on("click",".nav-list__link",function(e){e.stopPropagation()}),$(".js-footer-pane-toggle").click(function(){$(this).toggleClass("open"),$(".js-footer-pane-toggle").not($(this)).removeClass("open"),$(this).next().toggleClass("hidden"),$(".js-pane-content:not(.hidden)").not($(this).next()).addClass("hidden")}),$("body").on("click","a.named_anchor_link",function(){var e=$(window).width()<768?51:0;return $("body").hasClass("show-help-banner")&&(e+=$("#header_help_container").outerHeight()),$("html, body").animate({scrollTop:$('[name="'+$(this).attr("href").substr(1)+'"]').offset().top-e},500),$(this).attr("data-blink")!==undefined&&$("#"+$(this).attr("data-blink")).animate({color:"#FEF493"},800).animate({color:"white"},500),!1}),$("body").click(function(){$(".header__dropdown").fadeOut(),$(".header__toggle").removeClass("active")}),$(window).scroll(function(){$(this).scrollTop()>$(window).height()?$("#back-top").show():$("#back-top").hide()}),$("#back-top a").click(function(){return $("body,html").animate({scrollTop:0},400),!1}),$("body").on("click","#popup_wrapper a",function(){return parent.document.location=$(this).attr("href"),!1}),$("#js_vip_signup_form").submit(function(e){e.preventDefault();var t=$(this).find('input[name="email"]'),o=t.val().trim(),n=t.attr("pattern"),a=$(document.activeElement).data("gender");if(""!==o&&o.match(n)){var i="/subscribe_to_newsletter?vip=1&email="+o+"&gender="+a;console.log("url: "+i),$.ajax({url:i,success:function(e){$("#modal_subscribe_thanks_ajax").html(e),$("#modal_subscribe_thanks").remodal().open()}}),t.val("")}else;return!1}),$("#newsletterModal .sign-up-btn").click(function(){var e=$("#vip_signup_input"),t=e.val().trim(),o=e.attr("pattern"),n=$(document.activeElement).data("gender");if(""!==t&&t.match(o)){var a="/subscribe_to_newsletter?vip=1&email="+t+"&gender="+n;$("#newsletterModal").modal("hide"),console.log(a),$.ajax({url:a,success:function(e){$("#modal_subscribe_thanks_ajax").html(e),$("#modal_subscribe_thanks").remodal().open()}}),e.val("")}else;return!1}),$("#jewlrModal").on("hidden.bs.modal",function(){$(".modal-body").html("").attr("style","")}),$("body").on("click",".jewlrmodal",function(){var e=$(this).attr("href"),t=$(this).data("title");return $("#modal_jewlr_modal .title").text(t),$.ajax({url:e,dataType:"html",success:function(e){$("#modal_jewlr_modal_content").html(e),$("#modal_jewlr_modal").remodal().open()}}),!1}),$("body").on("click",".jewlrmodal_no_responsive",function(){var e=$(this).attr("href"),t=$(this).data("title"),o=$(this).data("external"),n=$(this).data("modal-width")||"auto";return open_bootstrap_modal_no_responsive(e,o,!0,$(this).data("modal-height")||"auto",t,n,"yes"),!1}),$(".cancel-country-select-modal-link").on("click",function(){return $("#country_select_modal").modal("hide"),!1})}function closeDesktopDropdownMenu(){$(".js-desktop-fulldrop").removeClass("visible"),$(".js-desktop-nav-link").removeClass("opened")}function openMobileMenu(){$("body").hasClass("nav-open")||($(".js-nav-overlay").addClass("visible-sm"),$("body").addClass("nav-open"),$("#js_mobile_menu .js-fade-out").addClass("fade-in"),$("#js_menu_toggle, #js_mobile_menu").addClass("open"))}function closeMobileMenu(){$("body").hasClass("nav-open")&&($(".js-nav-overlay").removeClass("visible-sm"),$("#js_mobile_menu .js-fade-out").removeClass("fade-in"),$("body").removeClass("nav-open"),$("#js_menu_toggle, #js_mobile_menu, .js-m-nav-submenu").removeClass("open"))}function openMobileSearchbar(){if($(".js-search-form").hasClass("opened"));else{var e=$(".js-search-form");$(".js-m-logo, #js_wishlist_section, #js_m_search_toggle, .js-cart-section").addClass("hidden"),e.addClass("opening"),$("#js_menu_toggle").addClass("open js-search-close"),setTimeout(function(){e.removeClass("opening").addClass("opened"),$(".js-search-input").addClass("open").focus()},350)}}function closeMobileSearchbar(){if($(".js-search-form").hasClass("opened")){var e=$(".js-search-form");$(".js-search-input").removeClass("open"),e.removeClass("opened").addClass("closing"),$("#js_menu_toggle").removeClass("open js-search-close"),setTimeout(function(){e.removeClass("closing").addClass("closed"),setTimeout(function(){e.removeClass("closed"),$(".js-m-logo, .js-cart-section, #js_wishlist_section, #js_m_search_toggle").removeClass("hidden")},300)},50)}}function closeCartWishlistAccountDropdowns(e){for(var t=["#js_wishlist_dropdown",".js-cart-dropdown","#js_account_dropdown"],o=0,n=t.length;o<n;o++){var a=t[o];e!==undefined&&e==a||($(a).fadeOut(),$(a).prev().removeClass("active"))}}function iframeLoaded(){$(".spinner-loading").remove();var e=$(window).height()-$(".modal-header").outerHeight()-$(".modal-dialog").outerHeight(!0)+$(".modal-dialog").innerHeight(),t=modal_content_height=$("iframe#modal_iframe").contents().find("body").outerHeight(!0);e<t&&(t=e),$(".modal-body").css("height",t),$("iframe#modal_iframe").css("height",modal_content_height)}function goToByScroll(e){"body"==e?$("html,body").animate({scrollTop:0},"slow"):$("html,body").animate({scrollTop:$("#"+e).offset().top},"slow")}function initSearchBox(){$(".search_icon").click(function(){var e=$(this).parents(".menu_div").find(".search-query");return e.is(":visible")?""!==e.val().trim()&&$(this).parents(".menu_div").find(".navbar-search,.navbar-search-collapsed,.navbar-search-in-collapsed").submit():(e.show("slide",{direction:"right"},function(){$(this).focus()}),$(this).addClass("hovered")),!1}),$(".search-query").blur(function(){var e=$(this).parents(".menu_div").find(".search_icon");return e.hasClass("hovered")&&(e.removeClass("hovered").trigger("blur"),$(this).hide("slide",{direction:"right"})),!1});var e={},t="",o=$(".js-search-input").typeahead({minLength:3,highlight:!0,autoSelect:!1,showHintOnFocus:!0,item:"<li></li>",updater:function(t){return send_search_keyword(e[t].keyword,e[t].url),e[t].name},matcher:function(){return!0},highlighter:function(t){var o=new RegExp("("+this.query+")","gi");return html='<a data-keyword="'+e[t].keyword+'" href="'+e[t].url+'" title="'+e[t].name.replace(/"/g,"&quot;")+'">',html+='<div class="suggestion clearfix">',html+='<div class="sg_thumb">',e[t].image_url&&(html+='<img src="'+e[t].image_url+'" height=32 width=32 />'),html+="</div>",html+='<div class="sg_body">',html+='<div class="sg_title type-'+e[t].type+'">',html+=e[t].name.replace(o,"<strong>$1</strong>"),html+="</div>",e[t].subtitle&&(html+='<div class="sg_subtitle">'+e[t].subtitle+"</div>"),html+="</div></div>",html+="</a>",html},source:function(o,n){""===(o=o.trim())||o.length<3||(t=o,$.get("/search/suggest",{k:o},function(o){var a=[];$.each(o.suggested_products,function(t,o){e[o.url]=o,a.push(o.url)}),a.length&&e[a[0]].query_string===t&&n(a)}))}});$(o).keyup(function(e){var t=e.keyCode||e.which;if(38!=t&&40!=t||$(".js-search-input").val($(".typeahead.dropdown-menu").children(".active").children().attr("title")),13==t){if($(this).val().trim().length<3)return!1;if($(".typeahead.dropdown-menu").children(".active")[0]){send_search_keyword($(".typeahead.dropdown-menu").children(".active").children().data("keyword"),$(".typeahead.dropdown-menu").children(".active").children().attr("href"))}else $(".js-search-form").submit()}16!=t&&17!=t&&18!=t&&37!=t&&38!=t&&39!=t&&40!=t&&91!=t&&93!=t&&(pos=getCursorPos(e),$(".js-search-input").val($(this).val()),restoreCursorPos(e,pos))}),$(o).keypress(function(e){return 13!=(e.keyCode||e.which)})}function initVideoHandlers(){$(".video_popup").hover(function(){$(this).attr("data-hover_img")!==undefined&&$(this).find("img").attr("src",$(this).attr("data-hover_img"))},function(){$(this).attr("data-hover_img")!==undefined&&$(this).find("img").attr("src",$(this).attr("data-img"))}),$(".video_popup").click(function(){var e=$(this).attr("href"),t=($(this).data("external"),$(this).data("title"));return $("#modal_jewlr_modal .title").text(t),$("#modal_jewlr_modal_content").html('<iframe width="100%" height="100%" id="modal_iframe" frameborder="0" allowtransparency="true" src="'+e+'"></iframe>'),$("#modal_jewlr_modal_content").height("600px"),$("#modal_jewlr_modal").remodal().open(),submit_ga_event_click("Videos","View Video",$(this).attr("data-title")),!1}),$("body").on("click",".product-video-modal",function(){return open_bootstrap_product_video($(this).data("src"),$(this).data("video-width"),$(this).data("video-height")),!1})}function initProductLinkClickHandler(){$("#content_container").on("click","li.product-item a",function(){var e=$(this).closest("li"),t=e.attr("data-style-code"),o=e.attr("data-list"),n=e.attr("data-list-pos");if("exclude"!=o){var a=Cookies.getJSON("collectionStats");if("object"!=typeof a?a={cslug:o,cidx:n}:(a.cslug=o,a.cidx=n),Cookies.set("collectionStats",a),"undefined"!=typeof ga&&ga.hasOwnProperty("loaded")&&!0===ga.loaded){var i=$(this).attr("href");return ga("ec:addProduct",{name:t,position:n}),ga("ec:setAction","click",{list:o}),ga("send","event","Product","click",t,{hitCallback:function(){window.location.href=i}}),!1}}return!0})}function initProductShareHandlers(){function e(e){$.ajax({url:"/products/email_a_friend",type:"POST",dataType:"html",data:JSON.stringify(e),success:function(e){$("#modal_share_product_ajax").html(e),$("#modal_share_product_email").remodal().open()}})}function t(e){var t="Check this out from Jewlr! "+e.title;FB.ui({method:"share",href:e.item_url,hashtag:"#jewlr",quote:t},function(){})}function o(e){Modernizr.touch?(submit_ga_event_click("Shares","Product Messenger Share",e.style_code,undefined,{"Style Code":e.style_code}),personalization_update("shared"),window.location="fb-messenger://share?link="+encodeURIComponent(e.item_url)):FB.ui({method:"send",link:e.item_url},function(t){console.log(t),t&&!t.error_message&&(submit_ga_event_click("Shares","Product Messenger Share",e.style_code),personalization_update("shared"))})}function n(e){var t=e.title+" #jewlr";open_pinterest_share(e.item_url,e.image_url,t,e.style_code),personalization_update("shared")}function a(e){var t="Check this out from Jewlr! "+e.title;open_twitter_share(e.item_url,t,e.style_code),personalization_update("shared")}$("body").on("click",".js-item_share",function(){var i=$(this).data("share-type"),r=$(this).data("style-code");if($(this).data("item-url")!==undefined){var s={style_code:r,title:$(this).data("item-title"),description:$(this).data("item-description"),price:$(this).data("item-price"),currency:$(this).data("item-currency"),item_url:shorten_url(generateSourceURL($(this).data("item-url"),i)),image_url:$(this).data("item-image-url"),product_options:{}};switch(i){case"email":e(s);break;case"messenger":o(s);break;case"facebook":t(s);break;case"pinterest":n(s);break;case"twitter":a(s);break;default:alert("Unhandled share_type: "+i)}"email"!=i&&$("#modal_share_product_email").remodal().close()}else{var l=$(this).data("line-item-id"),c="style_code="+r;$(this).attr("data-builder-data")!==undefined?c+="&builder_data="+encodeURIComponent($(this).attr("data-builder-data")):l===undefined?$(".item_input").each(function(){c+="&"+$(this).attr("name")+"="+encodeURIComponent($(this).val())}):c+="&line_item_id="+l,console.log(c),$.ajax({url:"/products/share_properties.json",type:"POST",cache:!1,async:!1,data:c,success:function(r){"facebook"!=i&&"messenger"!=i||r.item_url.indexOf("/products/share")<0&&(r.item_url=r.item_url.replace("/products/","/products/share/"));var s=r.item_url;switch("email"!=i&&(s=shorten_url(generateSourceURL(r.item_url,i))),"facebook"!=i&&"messenger"!=i||(s=s.replace("jwl.io","r.jewlr.com"),console.log("share_url: "+s)),r.item_url=s,i){case"email":e(r);break;case"messenger":o(r);break;case"facebook":t(r);break;case"pinterest":n(r);break;case"twitter":a(r);break;default:alert("Unhandled share_type: "+i)}"email"!=i&&$("#modal_share_product_email").remodal().close()}})}return!1})}function initLocaleHandler(){$(".js-country-select a").click(function(){Cookies.set("jewlr_locale",$(this).attr("data-locale"),{expires:365});var e=function(e){if(""==e)return{};for(var t={},o=0;o<e.length;++o){var n=e[o].split("=");2==n.length&&("locale"!==n[0]&&"tkn"!==n[0]&&(t[n[0]]=decodeURIComponent(n[1].replace(/\+/g," "))))}return t}(window.location.search.substr(1).split("&")),t=$(this).attr("href")+"?"+$.param(e)+"&locale="+$(this).attr("data-locale");return window.location=t,!1});var e=$("head").attr("lang");if("en-US"==e||e==undefined){var t=Cookies.get("jewlr_locale"),o=window.location.href.indexOf("locale=en-"),n="";o>-1&&(n=window.location.href.substring(o+7,o+12),"en-US"!=n&&"en-CA"!=n&&"en-GB"!=n&&"en-AU"!=n&&"en"!=n&&"fr-FR"!=n&&"de-DE"!=n&&"es-ES"!=n&&"nl-NL"!=n&&(n="en-US"),Cookies.set("jewlr_locale",n,{expires:365}),t=n);var a=!1;try{a=window.location.search.substring(1).indexOf("skipgeo")>=0}catch(e){}a||(null===t||t===undefined?$.ajax({type:"PUT",async:!1,dataType:"json",url:"/geo",beforeSend:function(e){e.setRequestHeader("Accept-Encoding","identity")},success:function(e){t=e.locale,Cookies.set("jewlr_locale",t,{expires:365}),"en-US"!=t&&$(".js-country-select a[data-locale="+t+"]").trigger("click")},error:function(){}}):null!==t&&t!==undefined&&t!=e&&n!=e&&$(".js-country-select a[data-locale="+t+"]").trigger("click"))}}function localeCallback(e){$("."+e+"_container").show()}function storeUserPref(e,t){if(global_store_pref_flag)try{var o=Cookies.getJSON("userPrefs")||{};o[e]=t,Cookies.set("userPrefs",o)}catch(e){console.log(e)}}function getUserPref(e){Cookies.getJSON("userPrefs")[e]}function submit_ga_user_id(e){"undefined"!=typeof ga&&ga.hasOwnProperty("loaded")&&!0===ga.loaded&&""!==e&&ga("set","userId",e)}function submit_ga_tracker(e){"undefined"!=typeof ga&&ga.hasOwnProperty("loaded")&&!0===ga.loaded&&ga("send","pageview",e.replace(/^.*\/\/[^\/]+/,""))}function submit_ga_event_click(e,t,o,n,a){"undefined"!=typeof ga&&ga.hasOwnProperty("loaded")&&!0===ga.loaded&&("Page"==e?ga("send","event",e,t,o,{nonInteraction:!0}):ga("send","event",e,t,o));try{if("undefined"!=typeof amplitude)var i={};var r=o,s=n;r!==undefined&&s!==undefined&&(i[r]=s),window.jewlr.config.site_country!==undefined&&(i.site_country=window.jewlr.config.site_country.toUpperCase()),Cookies.get("cart_token")&&(i.cart_token=Cookies.get("cart_token")),i=Object.assign({},a,i),amplitude.getInstance().logEvent(e+":"+t,i)}catch(e){}}function submit_social_tracking(e,t,o){"undefined"!=typeof ga&&ga.hasOwnProperty("loaded")&&!0===ga.loaded&&ga("send","social",e,t,o)}function ga_link(e,t){return"undefined"==typeof ga||!ga.hasOwnProperty("loaded")||!0!==ga.loaded||(ga(function(o){var n=new window.gaplugins.Linker(o),a=n.decorate(e);t!==undefined?window.open(a,t):window.location.href=a}),!1)}function ga_link_by_post(e){"undefined"!=typeof _gaq&&_gaq.push(["_linkByPost",e])}function open_facebook_share(e,t,o){submit_ga_event_click("Shares","Product Facebook Share",o,undefined,{"Style Code":o});var n="http://facebook.com/sharer.php?u="+encodeURIComponent(e);window.open(get_redirect_url(n),"_blank","status=1,width=600,height=400")}function open_twitter_share(e,t,o){submit_ga_event_click("Shares","Product Twitter Share",o,undefined,{"Style Code":o}),submit_social_tracking("twitter","tweet",o);var n="http://twitter.com/intent/tweet?text="+encodeURIComponent(t)+"&url="+encodeURIComponent(e);window.open(get_redirect_url(n),"_blank","status=1,width=600,height=500")}function open_pinterest_share(e,t,o,n){submit_ga_event_click("Shares","Product Pinterest Share",n,undefined,{"Style Code":n}),console.log(n),submit_social_tracking("pinterest","pin",n);var a="http://pinterest.com/pin/create/button/?url="+encodeURIComponent(e)+"&media="+encodeURIComponent(t)+"&description="+encodeURIComponent(o);window.open(get_redirect_url(a),"_blank","status=1,width=650,height=550")}function shorten_url(e){var t=null;return $.ajax({type:"GET",async:!1,dataType:"json",url:"/api/v1/shorten?url="+encodeURIComponent(e),beforeSend:function(e){e.setRequestHeader("Accept-Encoding","identity")},success:function(e){t=e.shortened_url},error:function(){}}),t}function open_bootstrap_modal(e,t,o,n,a,i,r){return i===undefined&&(i="yes"),t?$(".modal-body").html('<div class="spinner-loading text-center">Loading... &nbsp;&nbsp<i class="fa fa-spinner fa fa-spin"></i></div><iframe width="100%" id="modal_iframe" frameborder="0" scrolling="'+i+'" allowtransparency="true" src="'+e+'"></iframe>'):$.get(e,function(e){$(".modal-body").html(e)}).success(function(){}),o?$("#jewlrModal").removeClass("modal_no_background"):$("#jewlrModal").addClass("modal_no_background"),300==a?($(".modal-dialog").css("width",""),$(".modal-dialog").removeClass("modal_300").removeClass("modal_600").removeClass("modal_800").addClass("modal_300")):600==a?($(".modal-dialog").css("width",""),$(".modal-dialog").removeClass("modal_300").removeClass("modal_600").removeClass("modal_800").addClass("modal_600")):800==a?($(".modal-dialog").css("width",""),$(".modal-dialog").removeClass("modal_300").removeClass("modal_600").removeClass("modal_800").addClass("modal_800")):a!==undefined&&($(".modal-dialog").removeClass("modal_300").removeClass("modal_600").removeClass("modal_800"),$(".modal-dialog").css("width",a+"px")),"yes"==r?$(".modal-header .close").addClass("hide-close"):$(".modal-header .close").removeClass("hide-close"),n===undefined&&(n="&nbsp;"),$("#myModalLabel").html(n),$("#jewlrModal").modal("show"),!1}function open_bootstrap_modal_no_responsive(e,t,o,n,a,i,r){return"NaN"!=parseInt(n).toString()?n+="px":n="auto",r===undefined&&(r="no"),t===undefined&&(t=!0),t?$(".modal-body").html('<iframe width="100%" height="'+n+'" frameborder="0" scrolling="'+r+'" allowtransparency="true" style="overflow-y:scroll" src="'+e+'"></iframe>'):$.get(e,function(e){$(".modal-body").html(e)}),o?$("#jewlrModal").removeClass("modal_no_background"):$("#jewlrModal").addClass("modal_no_background"),modal_width=get_current_modal_width(i),$(".modal-header .close").removeClass("hide-close"),$("#jewlrModal").css("width",modal_width).css("margin","10px 10px auto 10px").css("left",($(window).width()-20-modal_width)/2).css("top",($(window).height()-20-n)/2),a===undefined?(a="&nbsp;",$(".modal-header").addClass("no-header")):$(".modal-header").removeClass("no-header"),$("#myModalLabel").html(a),$("#jewlrModal").modal(),!1}function get_current_modal_width(e){if($(window).width()-20<=e)var t=$(window).width()-20;else var t=e;return t}function open_bootstrap_modal_photo(e){$("#photo_modal .item").css("width",e).css("height",e),$("#photo_modal .modal-body").css("margin-top",($(window).height()-88-e-60)/2),$("#photo_modal .carousel").css("width",e).css("height",e+30),$("#photo_modal").modal("show")}function open_bootstrap_product_video(e,t,o){var n=$(window).width(),a=$(window).height();n<t&&(t=n,o=n/(t/o));var i='<iframe src="'+e+'?autoplay=1" width="'+t+'" height="'+o+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';$("#mediaModal .modal-body").html(i),$("#mediaModal .modal-body").css("height",o+"px"),$("#mediaModal").on("show.bs.modal",function(){var e=$(this).find(".modal-body"),n=$(this).find(".modal-dialog"),i=t+parseInt(e.css("padding-left"))+parseInt(e.css("padding-right"));i+=parseInt(n.css("padding-left"))+parseInt(n.css("padding-right")),i+="px",$(this).find(".modal-dialog").css("width",i).css("padding-top",(a-o)/2)}),$("#mediaModal").modal("show")}function submitSiftScienceTracking(){var e=Cookies.get("cart_token");e?_updateSiftScienceTracking(e):$.ajax({url:"/cart/view_cart_list.json",type:"GET",success:function(){e=Cookies.get("cart_token"),_updateSiftScienceTracking(e)},error:function(){}})}function _updateSiftScienceTracking(e){if("undefined"!=typeof _sift){isSessionSet=!1;for(var t=0;t<_sift.length;t++)if("_setSessionId"==_sift[t][0]){_sift[t][1]=e,isSessionSet=!0;break}isSessionSet||_sift.push(["_setSessionId",e]),"undefined"!=typeof Sift&&Sift()}}function send_search_keyword(e,t){if("undefined"!=typeof ga&&ga.hasOwnProperty("loaded")&&!0===ga.loaded){var o="/search?k=AC-"+e;try{ga("send","pageview",o,{hitCallback:function(){window.location.href=t}})}catch(e){window.location.href=t}}else window.location.href=t}function updateCartCountNew(){var e=0;try{e=parseInt(Cookies.get("cart_count"))}catch(e){}isNaN(e)&&(e=0),$(".js-cart-count").html(e)}function updateWishListCountNew(){var e=0;try{e=parseInt(Cookies.get("wishlist_count"))}catch(e){}isNaN(e)&&(e=0),e>0?($(".js-wishlist-icon").removeClass("fa-heart-o").addClass("fa-heart"),$("#wishlist_count").html(e)):($(".js-wishlist-icon").removeClass("fa-heart").addClass("fa-heart-o"),$("#wishlist_count").html(""))}function initCartWishListSHandlers(){$(".header").on("click","#js_account_toggle",function(){return closeCartWishlistAccountDropdowns("#js_account_dropdown"),closeDesktopDropdownMenu(),closeMobileMenu(),closeMobileSearchbar(),$("#js_account_toggle").toggleClass("active"),$("#js_account_dropdown").is(":visible")?$("#js_account_dropdown").fadeOut():$("#js_account_dropdown").fadeIn(),!1}),updateCartCountNew(),updateWishListCountNew(),$(".js-cart-dropdown").on("click",".js-dummy-link",function(){return!1}),$(".js-cart-dropdown").on("click",".js-share-link",function(){var e=$(this).attr("href");return $.ajax({url:e,dataType:"html",success:function(e){$("#modal_share_wishlist_ajax").html(e),$("#modal_share_wishlist_email").remodal().open()}}),!1}),$(".header").on("click",".js-cart-toggle",function(){if(!$("body").hasClass("nav-open")){if(closeCartWishlistAccountDropdowns(".js-cart-dropdown"),closeDesktopDropdownMenu(),closeMobileMenu(),closeMobileSearchbar(),$(".js-cart-toggle").addClass("active"),$(".js-cart-dropdown").is(":visible"))$(".js-cart-dropdown").hide(),$(".js-cart-toggle").removeClass("active");else{var e=$(".js-cart-dropdown");e.fadeIn(),$.ajax({url:"/cart/view_cart_list.json",type:"GET",success:function(t){e.html(t.cart_lists),updateCartCountNew()},error:function(){}}),updateCartCountNew()}return!1}}),$("#js_wishlist_dropdown,#collections_item_container.wishlist").on("click",".js-share-link, .share-link",function(){var e=$(this).attr("href");return $.ajax({url:e,dataType:"html",success:function(e){$("#modal_share_wishlist_ajax").html(e),$("#modal_share_wishlist_email").remodal().open()}}),!1}),$(".header").on("click","#js_wishlist_dropdown .js-remove-link",function(){return $.ajax({url:"/cart/remove_from_wish_list.json",type:"POST",data:{id_to_remove:$(this).data("id_to_remove"),item_type:$(this).data("item_type"),authenticity_token:$("input[name=authenticity_token]").val()},success:function(e){updateWishListCountNew(),$("#js_wishlist_dropdown").html(e.wish_lists),$("#js_wishlist_dropdown").fadeIn()},error:function(){$("#js_wishlist_dropdown").fadeIn()}}),!1}),$(".header").on("click",".js-cart-dropdown .js-remove-link",function(e){return e.stopPropagation(),$.ajax({url:"/cart/remove_from_cart_list.json",type:"POST",data:{id_to_remove:$(this).data("id_to_remove"),item_type:$(this).data("item_type"),authenticity_token:$("input[name=authenticity_token]").val()},success:function(e){$(".js-cart-dropdown").html(e.cart_lists),updateCartCountNew(),$(".js-cart-dropdown").fadeTo(500,1),"/cart"===window.location.pathname&&location.reload()},error:function(){$(".js-cart-dropdown").fadeIn()}}),!1}),$(".header").on("click","#js_wishlist_dropdown .clear-link",function(){return $.ajax({url:"/cart/remove_all_from_wish_list.json",type:"POST",data:{authenticity_token:$("input[name=authenticity_token]").val()},success:function(e){$("#js_wishlist_dropdown").html(e.wish_lists),updateWishListCountNew()},error:function(){}}),!1}),$(".header").on("click","#js_wishlist_toggle",function(){if(!$("body").hasClass("nav-open")){if(closeCartWishlistAccountDropdowns("#js_wishlist_dropdown"),closeDesktopDropdownMenu(),closeMobileSearchbar(),closeMobileMenu(),$("#js_wishlist_dropdown").is(":visible"))$("#js_wishlist_dropdown").fadeOut(),$("#js_wishlist_toggle").removeClass("active");else{var e=$("#js_wishlist_dropdown");try{var t=$(this).get(0).getBoundingClientRect().right,o=$(this).parents("ul")[0].getBoundingClientRect().right,n=t-o;$(".navbar-right__dropdown--left").css("right",n+"px")}catch(e){}$("#js_wishlist_toggle").addClass("active"),e.fadeIn(),0==e.children("li").length&&$.ajax({url:"/cart/view_wish_list.json",type:"GET",success:function(t){e.html(t.wish_lists),updateWishListCountNew()},error:function(){}})}return!1}}),$("#js_country_toggle").click(function(){$("#js_country_dropdown").toggleClass("open")}),$(".header").on("click","#js_m_search_toggle, .js-search-close",function(){return closeMobileMenu(),closeCartWishlistAccountDropdowns(),$(".js-search-form").hasClass("opened")?closeMobileSearchbar():openMobileSearchbar(),!1})}function insert_alert_container(e,t,o,n,a){var i='<div id="flashbar_container" class="'+(a||"container")+'">';i+='<div class="pure-alert pure-alert-'+e+'">',
i+=o?'<a class="js-alert-close alert-close '+o+'" data-dismiss="alert">&times;</a>':'<a class="js-alert-close alert-close" data-dismiss="alert">&times;</a>',i+=t,i+="</div></div>",$("#flashbar_container").remove(),$(i).insertBefore("#"+(n||"content_container"))}function validateThisForm(e){var t=!0;return $("#"+e+" input[required='required'], #"+e+" select[required='required']").each(function(){var e=$(this).val().trim(),o=$(this).attr("pattern");e.match(o)?$(this).removeClass("pure-input--error"):($(this).focus().addClass("pure-input--error"),t=!1)}),!!t&&($("#"+e+" input[type=text]").not(":input[required='required']").each(function(){$(this).val().trim()==$(this).attr("placeholder")&&$(this).attr("disabled",!0)}),t)}function check_webgl(){try{return!!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(e){return!1}}function check_b4w(){try{return!!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")&&"undefined"!=typeof b4w}catch(e){return!1}}function initSiteHandlers(){document.documentElement.clientWidth<767?$(window).scroll(function(){$(this).scrollTop()>200&&!$("body").hasClass("hide-helpbar")?hideHelpBar():$(this).scrollTop()<=200&&!$("body").hasClass("nav-open")&&showHelpBar()}):(header_benefits=$(".js-benefits"),header_benefits_index=-1,showBenefits(),$(window).scroll(function(){$(this).scrollTop()>120&&!$("body").hasClass("sticky-header")?($("body").addClass("sticky-header"),$(".js-sticky-header").addClass("show")):$(this).scrollTop()<=120&&($("body").removeClass("sticky-header"),$(".js-sticky-header").removeClass("show"))}))}function showBenefits(){++header_benefits_index,header_benefits.eq(header_benefits_index%header_benefits.length).fadeIn(1e3).delay(1700).fadeOut(1e3,showBenefits)}function hideHelpBar(){$("body").addClass("hide-helpbar")}function showHelpBar(){$("body").removeClass("hide-helpbar")}function initMenuHandlers(){$("#js_desktop_nav").on("click",".js-desktop-nav-link",function(e){return"#"!=$(this).attr("href")||($(".header__dropdown").fadeOut(),$(".js-desktop-fulldrop").not($(this).next()).removeClass("visible"),$(".js-desktop-nav-link").not($(this)).removeClass("opened"),$(this).next().toggleClass("visible"),$(this).toggleClass("opened"),e.stopPropagation(),!1)}),$(document).click(function(e){$(e.target).is(".visible, .visible *")||closeDesktopDropdownMenu()})}function doLogin(e,t,o){cookie_options="facebook"==t?{expires:30}:o?{expires:365}:{},Cookies.set("provider",t,cookie_options),Cookies.set("access_token",e.jewlrorders.access_token,cookie_options),Cookies.set("wishlist_token",e.jewlr4.wishlist_token,cookie_options),Cookies.set("wishlist_count",e.jewlr4.wishlist_count,cookie_options),Cookies.set("cart_token",e.jewlr4.cart_token,cookie_options),Cookies.set("cart_count",e.jewlr4.cart_count,cookie_options),Cookies.set("user_obj",e.jewlrorders.user,cookie_options);var n=Cookies.getJSON("userPrefs");n||(n={}),e.jewlrorders.user.first_name&&(e.jewlrorders.user.gender&&"M"==e.jewlrorders.user.gender?n.e1||(n.e1=e.jewlrorders.user.first_name,Cookies.set("userPrefs",n,{expires:365})):n.e2||(n.e2=e.jewlrorders.user.first_name,Cookies.set("userPrefs",n,{expires:365}))),"undefined"!=typeof LC_API?(LC_API.set_visitor_name(e.jewlrorders.user.first_name+" "+e.jewlrorders.user.last_name),LC_API.set_visitor_email(e.jewlrorders.user.email)):window.__lc.visitor={name:e.jewlrorders.user.first_name+" "+e.jewlrorders.user.last_name,email:e.jewlrorders.user.email},"undefined"!=typeof FS&&FS.identify(e.jewlrorders.user.guid_token,{displayName:e.jewlrorders.user.first_name+" "+e.jewlrorders.user.last_name,email:e.jewlrorders.user.email}),updateCartCountNew(),updateWishListCountNew(),$("#js_wishlist_dropdown, .js-cart-dropdown").html(""),showLogoutButton(),"/wishlist"==window.location.pathname||"/cart"==window.location.pathname?(e.jewlrorders.user.first_time_discount&&Cookies.set("discount_modal",!0),window.location.reload()):e.jewlrorders.user.first_time_discount,"facebook"==t&&"undefined"!=typeof _loadProductData&&(_loadProductData(),updatePriceAndShippingTime()),"facebook"==t&&"undefined"!=typeof freshCollections&&freshCollections(!0,!1)}function facebookDoLogin(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++)-1!=e[t].split("=")[0].indexOf("fblo_")&&Cookies.remove($.trim(e[t].split("=")[0]));FB.login(function(e){if(e.authResponse){facebookLogin();var t="Continue with FB";submit_ga_event_click(t,"accepted")}else{var t="Continue with FB";submit_ga_event_click(t,"decline_at_login")}},{scope:"public_profile,email"})}function doLogout(){"facebook"==Cookies.get("provider")?facebookDoLogout():internalLogout()}function facebookDoLogout(){FB.logout(function(e){facebookStatus(e)})}function facebookConnect(e){var t={};t.fb_uid=e.authResponse.userID,t.fb_access_token=e.authResponse.accessToken,t.cart_token=Cookies.get("cart_token"),t.wishlist_token=Cookies.get("wishlist_token"),$.ajax({url:"/api/v2/facebook_connect",type:"POST",cache:!1,data:t,success:function(e){obj=e.ResponseObject,doLogin(obj,"facebook")}})}function facebookLogin(){FB.getLoginStatus(function(e){console.log("getLoginStatus: "+e),"connected"===e.status?(fb_prompt=$('[data-remodal-id="facebook-login"]').remodal(),"opened"==fb_prompt.getState()&&fb_prompt.close("confirmation"),facebookConnect(e)):facebookStatus(e)})}function facebookStatus(e){"connected"===e.status?Cookies.get("access_token")?Cookies.getJSON("user_obj")===undefined?facebookConnect(e):showLogoutButton():facebookLogin():Cookies.get("facebook_declined")?Cookies.get("access_token")&&"facebook"==Cookies.get("provider")?internalLogout():Cookies.get("access_token")&&showLogoutButton():Cookies.get("access_token")&&"facebook"==Cookies.get("provider")?internalLogout():Cookies.get("access_token")?showLogoutButton():window.location.pathname}function internalLogout(){var e={};e.access_token=Cookies.get("access_token"),$.ajax({url:"/api/v2/logout",type:"POST",cache:!1,data:e,success:function(e){console.log("logout result: "+e.inspect)}});var t=Cookies.get("provider");Cookies.remove("provider"),Cookies.remove("access_token"),Cookies.remove("wishlist_token"),Cookies.remove("wishlist_count"),Cookies.remove("cart_token"),Cookies.remove("cart_count"),Cookies.remove("user_obj"),updateCartCountNew(),updateWishListCountNew(),showLoginButton(),$("#js_wishlist_dropdown,.js-cart-dropdown").html(""),"/wishlist"!=window.location.pathname&&"/cart"!=window.location.pathname||window.location.reload(),"facebook"==t&&"undefined"!=typeof _loadProductData&&window.location.reload(),"facebook"==t&&"undefined"!=typeof freshCollections&&freshCollections(!0,!1)}function showLogoutButton(){$(".js-log-in-link").hide(),$(".js-log-out-link").show();try{var e=Cookies.getJSON("user_obj");$(".js-profile-name").html(e.first_name+" "+e.last_name),$(".js-profile-subname").html(e.email),e.profile_pic&&$(".js-account-profile-pic").prop("src",e.profile_pic),$(".js-account-block").show(),$(".js-alternative-account-block").hide()}catch(e){console.log(e)}var t=$("#modal_login").remodal();"opened"==t.getState()&&t.close(),Cookies.get("discount_modal")&&Cookies.remove("discount_modal")}function showLoginButton(){$(".js-log-in-link").show(),$(".js-log-out-link").hide(),$(".js-account-block").hide(),$(".js-alternative-account-block").show(),$(".js-profile-name").empty(),$(".js-profile-subname").empty(),profile_pic=$(".js-account-profile-pic"),profile_pic.prop("src",profile_pic.first().data("orig-src"))}function internalFacebookButton(){$(".fb-login-button").each(function(){$(this).after('<div class="fb-login-button" data-max-rows="1" data-size="large" data-show-faces="false" data-auto-logout-link="true" onlogin="facebookLogin();">'),$(this).remove()}),FB.XFBML.parse()}function emailLogin(){var e={};e.email=$("#login-form-email-field").val().trim(),e.password=$("#login-form-password-field").val().trim(),e.cart_token=Cookies.get("cart_token"),e.wishlist_token=Cookies.get("wishlist_token"),$("#modal_login_remember_me").is(":checked")?remember_me=!0:remember_me=!1,$.ajax({url:"/api/v2/login",type:"POST",cache:!1,data:e,success:function(e){104==e.ResponseCode?(insert_alert_container("danger","Login failed. Please check your email/password and try again!",null,"login_error_placeholder","login_fail"),$("#login-form-password-field").val("")):1!=e.ResponseCode?insert_alert_container("danger","There was an error while trying to log in. Please give us a call at "+window.jewlr.config.customer_service_toll_free,null,"login_error_placeholder","login_fail"):($("#login_error_placeholder").prev("#flashbar_container").remove(),obj=e.ResponseObject,$("#login-form-email-field,#login-form-password-field").val(""),doLogin(obj,"jewlrorders",remember_me))}})}!function(e,t){"use strict";e.rails!==t&&e.error("jquery-ujs has already been loaded!");var o,n=e(document);e.rails=o={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return e("meta[name=csrf-token]").attr("content")},csrfParam:function(){return e("meta[name=csrf-param]").attr("content")},CSRFProtection:function(e){var t=o.csrfToken();t&&e.setRequestHeader("X-CSRF-Token",t)},refreshCSRFTokens:function(){e('form input[name="'+o.csrfParam()+'"]').val(o.csrfToken())},fire:function(t,o,n){var a=e.Event(o);return t.trigger(a,n),!1!==a.result},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e[0].href},isRemote:function(e){return e.data("remote")!==t&&!1!==e.data("remote")},handleRemote:function(n){var a,i,r,s,l,c;if(o.fire(n,"ajax:before")){if(s=n.data("with-credentials")||null,l=n.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,n.is("form")){a=n.data("ujs:submit-button-formmethod")||n.attr("method"),i=n.data("ujs:submit-button-formaction")||n.attr("action"),r=e(n[0]).serializeArray();var d=n.data("ujs:submit-button");d&&(r.push(d),n.data("ujs:submit-button",null)),n.data("ujs:submit-button-formmethod",null),n.data("ujs:submit-button-formaction",null)}else n.is(o.inputChangeSelector)?(a=n.data("method"),i=n.data("url"),r=n.serialize(),n.data("params")&&(r=r+"&"+n.data("params"))):n.is(o.buttonClickSelector)?(a=n.data("method")||"get",i=n.data("url"),r=n.serialize(),n.data("params")&&(r=r+"&"+n.data("params"))):(a=n.data("method"),i=o.href(n),r=n.data("params")||null);return c={type:a||"GET",data:r,dataType:l,beforeSend:function(e,a){if(a.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+a.accepts.script),!o.fire(n,"ajax:beforeSend",[e,a]))return!1;n.trigger("ajax:send",e)},success:function(e,t,o){n.trigger("ajax:success",[e,t,o])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,o){n.trigger("ajax:error",[e,t,o])},crossDomain:o.isCrossDomain(i)},s&&(c.xhrFields={withCredentials:s}),i&&(c.url=i),o.ajax(c)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var o=document.createElement("a");try{return o.href=e,o.href=o.href,!((!o.protocol||":"===o.protocol)&&!o.host||t.protocol+"//"+t.host==o.protocol+"//"+o.host)}catch(e){return!0}},handleMethod:function(n){var a=o.href(n),i=n.data("method"),r=n.attr("target"),s=o.csrfToken(),l=o.csrfParam(),c=e('<form method="post" action="'+a+'"></form>'),d='<input name="_method" value="'+i+'" type="hidden" />';l===t||s===t||o.isCrossDomain(a)||(d+='<input name="'+l+'" value="'+s+'" type="hidden" />'),r&&c.attr("target",r),c.hide().append(d).appendTo("body"),c.submit()},formElements:function(t,o){return t.is("form")?e(t[0].elements).filter(o):t.find(o)},disableFormElements:function(t){o.formElements(t,o.disableSelector).each(function(){o.disableFormElement(e(this))})},disableFormElement:function(e){var o,n;o=e.is("button")?"html":"val",n=e.data("disable-with"),n!==t&&(e.data("ujs:enable-with",e[o]()),e[o](n)),e.prop("disabled",!0),e.data("ujs:disabled",!0)},enableFormElements:function(t){o.formElements(t,o.enableSelector).each(function(){o.enableFormElement(e(this))})},enableFormElement:function(e){var o=e.is("button")?"html":"val";e.data("ujs:enable-with")!==t&&(e[o](e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.prop("disabled",!1),e.removeData("ujs:disabled")},allowAction:function(e){var t,n=e.data("confirm"),a=!1;if(!n)return!0;if(o.fire(e,"confirm")){try{a=o.confirm(n)}catch(e){(console.error||console.log).call(console,e.stack||e)}t=o.fire(e,"confirm:complete",[a])}return a&&t},blankInputs:function(t,o,n){var a,i,r,s,l=e(),c=o||"input,textarea",d=t.find(c),u={};return d.each(function(){a=e(this),a.is("input[type=radio]")?(s=a.attr("name"),u[s]||(0===t.find('input[type=radio]:checked[name="'+s+'"]').length&&(r=t.find('input[type=radio][name="'+s+'"]'),l=l.add(r)),u[s]=s)):(i=a.is("input[type=checkbox],input[type=radio]")?a.is(":checked"):!!a.val())===n&&(l=l.add(a))}),!!l.length&&l},nonBlankInputs:function(e,t){return o.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){var n=e.data("disable-with");n!==t&&(e.data("ujs:enable-with",e.html()),e.html(n)),e.bind("click.railsDisable",function(e){return o.stopEverything(e)}),e.data("ujs:disabled",!0)},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable"),e.removeData("ujs:disabled")}},o.fire(n,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,n){e.crossDomain||o.CSRFProtection(n)}),e(window).on("pageshow.rails",function(){e(e.rails.enableSelector).each(function(){var t=e(this);t.data("ujs:disabled")&&e.rails.enableFormElement(t)}),e(e.rails.linkDisableSelector).each(function(){var t=e(this);t.data("ujs:disabled")&&e.rails.enableElement(t)})}),n.on("ajax:complete",o.linkDisableSelector,function(){o.enableElement(e(this))}),n.on("ajax:complete",o.buttonDisableSelector,function(){o.enableFormElement(e(this))}),n.on("click.rails",o.linkClickSelector,function(t){var n=e(this),a=n.data("method"),i=n.data("params"),r=t.metaKey||t.ctrlKey;if(!o.allowAction(n))return o.stopEverything(t);if(!r&&n.is(o.linkDisableSelector)&&o.disableElement(n),o.isRemote(n)){if(r&&(!a||"GET"===a)&&!i)return!0;var s=o.handleRemote(n);return!1===s?o.enableElement(n):s.fail(function(){o.enableElement(n)}),!1}return a?(o.handleMethod(n),!1):void 0}),n.on("click.rails",o.buttonClickSelector,function(t){var n=e(this);if(!o.allowAction(n)||!o.isRemote(n))return o.stopEverything(t);n.is(o.buttonDisableSelector)&&o.disableFormElement(n);var a=o.handleRemote(n);return!1===a?o.enableFormElement(n):a.fail(function(){o.enableFormElement(n)}),!1}),n.on("change.rails",o.inputChangeSelector,function(t){var n=e(this);return o.allowAction(n)&&o.isRemote(n)?(o.handleRemote(n),!1):o.stopEverything(t)}),n.on("submit.rails",o.formSubmitSelector,function(n){var a,i,r=e(this),s=o.isRemote(r);if(!o.allowAction(r))return o.stopEverything(n);if(r.attr("novalidate")===t)if(r.data("ujs:formnovalidate-button")===t){if((a=o.blankInputs(r,o.requiredInputSelector,!1))&&o.fire(r,"ajax:aborted:required",[a]))return o.stopEverything(n)}else r.data("ujs:formnovalidate-button",t);if(s){if(i=o.nonBlankInputs(r,o.fileInputSelector)){setTimeout(function(){o.disableFormElements(r)},13);var l=o.fire(r,"ajax:aborted:file",[i]);return l||setTimeout(function(){o.enableFormElements(r)},13),l}return o.handleRemote(r),!1}setTimeout(function(){o.disableFormElements(r)},13)}),n.on("click.rails",o.formInputClickSelector,function(t){var n=e(this);if(!o.allowAction(n))return o.stopEverything(t);var a=n.attr("name"),i=a?{name:a,value:n.val()}:null,r=n.closest("form");0===r.length&&(r=e("#"+n.attr("form"))),r.data("ujs:submit-button",i),r.data("ujs:formnovalidate-button",n.attr("formnovalidate")),r.data("ujs:submit-button-formaction",n.attr("formaction")),r.data("ujs:submit-button-formmethod",n.attr("formmethod"))}),n.on("ajax:send.rails",o.formSubmitSelector,function(t){this===t.target&&o.disableFormElements(e(this))}),n.on("ajax:complete.rails",o.formSubmitSelector,function(t){this===t.target&&o.enableFormElements(e(this))}),e(function(){o.refreshCSRFTokens()}))}(jQuery),function(e){if("function"==typeof define&&define.amd)define(e);else if("object"==typeof exports)module.exports=e();else{var t=window.Cookies,o=window.Cookies=e();o.noConflict=function(){return window.Cookies=t,o}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var o=arguments[e];for(var n in o)t[n]=o[n]}return t}function t(o){function n(t,a,i){var r;if("undefined"!=typeof document){if(arguments.length>1){if(i=e({path:"/"},n.defaults,i),"number"==typeof i.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*i.expires),i.expires=s}try{r=JSON.stringify(a),/^[\{\[]/.test(r)&&(a=r)}catch(e){}return a=o.write?o.write(a,t):encodeURIComponent(String(a)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",a,i.expires&&"; expires="+i.expires.toUTCString(),i.path&&"; path="+i.path,i.domain&&"; domain="+i.domain,i.secure?"; secure":""].join("")}t||(r={});for(var l=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,d=0;d<l.length;d++){var u=l[d].split("="),h=u.slice(1).join("=");'"'===h.charAt(0)&&(h=h.slice(1,-1));try{var m=u[0].replace(c,decodeURIComponent);if(h=o.read?o.read(h,m):o(h,m)||h.replace(c,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(e){}if(t===m){r=h;break}t||(r[m]=h)}catch(e){}}return r}}return n.set=n,n.get=function(e){return n(e)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(t,o){n(t,"",e(o,{expires:-1}))},n.withConverter=t,n}return t(function(){})}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(o){return t(e,o)}):"object"==typeof exports?t(e,require("jquery")):t(e,e.jQuery||e.Zepto)}(this,function(e,t){"use strict";function o(e){if($&&"none"===e.css("animation-name")&&"none"===e.css("-webkit-animation-name")&&"none"===e.css("-moz-animation-name")&&"none"===e.css("-o-animation-name")&&"none"===e.css("-ms-animation-name"))return 0;var t,o,n,a,i=e.css("animation-duration")||e.css("-webkit-animation-duration")||e.css("-moz-animation-duration")||e.css("-o-animation-duration")||e.css("-ms-animation-duration")||"0s",r=e.css("animation-delay")||e.css("-webkit-animation-delay")||e.css("-moz-animation-delay")||e.css("-o-animation-delay")||e.css("-ms-animation-delay")||"0s",s=e.css("animation-iteration-count")||e.css("-webkit-animation-iteration-count")||e.css("-moz-animation-iteration-count")||e.css("-o-animation-iteration-count")||e.css("-ms-animation-iteration-count")||"1";for(i=i.split(", "),r=r.split(", "),s=s.split(", "),a=0,o=i.length,t=Number.NEGATIVE_INFINITY;a<o;a++)(n=parseFloat(i[a])*parseInt(s[a],10)+parseFloat(r[a]))>t&&(t=n);return t}function n(){if(t(document).height()<=t(window).height())return 0;var e,o,n=document.createElement("div"),a=document.createElement("div");return n.style.visibility="hidden",n.style.width="100px",document.body.appendChild(n),e=n.offsetWidth,n.style.overflow="scroll",a.style.width="100%",n.appendChild(a),o=a.offsetWidth,n.parentNode.removeChild(n),e-o}function a(){if(!k){var e,o,a=t("html"),i=d("is-locked");a.hasClass(i)||(o=t(document.body),e=parseInt(o.css("padding-right"),10)+n(),o.css("padding-right",e+"px"),a.addClass(i))}}function i(){if(!k){var e,o,a=t("html"),i=d("is-locked");a.hasClass(i)&&(o=t(document.body),e=parseInt(o.css("padding-right"),10)-n(),o.css("padding-right",e+"px"),a.removeClass(i))}}function r(e,t,o,n){var a=d("is",t),i=[d("is",w.CLOSING),d("is",w.OPENING),d("is",w.CLOSED),d("is",w.OPENED)].join(" ");e.$bg.removeClass(i).addClass(a),e.$overlay.removeClass(i).addClass(a),e.$wrapper.removeClass(i).addClass(a),e.$modal.removeClass(i).addClass(a),e.state=t,!o&&e.$modal.trigger({type:t,reason:n},[{reason:n}])}function s(e,n,a,i){var r=0,s=function(e){e.target===this&&r++},c=function(e){e.target===this&&0==--r&&(t.each(["$bg","$overlay","$wrapper","$modal"],function(e,t){a[t].off(v+" "+_)}),i&&l(i),n(),t(".remodal-is-stale").removeClass("remodal-is-stale"))};t.each(["$bg","$overlay","$wrapper","$modal"],function(e,t){a[t].on(v,s).on(_,c)}),e(),0===o(a.$bg)&&0===o(a.$overlay)&&0===o(a.$wrapper)&&0===o(a.$modal)&&(t.each(["$bg","$overlay","$wrapper","$modal"],function(e,t){a[t].off(v+" "+_)}),n())}function l(e){e.state!==w.CLOSED&&(t.each(["$bg","$overlay","$wrapper","$modal"],function(t,o){e[o].off(v+" "+_)}),e.$wrapper.removeClass("remodal-is-stale").hide(),i(),r(e,w.CLOSED,!0))}function c(e){var t,o,n,a,i={};for(e=e.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,","),t=e.split(","),a=0,o=t.length;a<o;a++)t[a]=t[a].split(":"),n=t[a][1],("string"==typeof n||n instanceof String)&&(n="true"===n||"false"!==n&&n),("string"==typeof n||n instanceof String)&&(n=isNaN(n)?n:+n),i[t[a][0]]=n;return i}function d(){for(var e=g,t=0;t<arguments.length;++t)e+="-"+arguments[t];return e}function u(){var e,o,n=location.hash.replace("#","");if(n){try{o=t("[data-"+p+'-id="'+n+'"]')}catch(e){}o&&o.length&&(e=t[p].lookup[o.data(p)])&&e.settings.hashTracking&&e.open()}else m&&m.state===w.OPENED&&m.settings.hashTracking&&m.close()}function h(e,o){var n=t(document.body),a=n,i=this;i.settings=t.extend({},b,o),i.index=t[p].lookup.push(i)-1,i.state=w.CLOSED,i.$overlay=t("."+d("overlay")),null!==i.settings.appendTo&&i.settings.appendTo.length&&(a=t(i.settings.appendTo)),i.$overlay.length||(i.$overlay=t("<div>").addClass(d("overlay")+" "+d("is",w.CLOSED)).hide(),a.append(i.$overlay)),i.$bg=t("."+d("bg")).addClass(d("is",w.CLOSED)),i.$modal=e.addClass(g+" "+d("is-initialized")+" "+i.settings.modifier+" "+d("is",w.CLOSED)).attr("tabindex","-1"),i.$wrapper=t("<div>").addClass(d("wrapper")+" "+i.settings.modifier+" "+d("is",w.CLOSED)).hide().append(i.$modal),a.append(i.$wrapper),i.$wrapper.on("click."+g,"[data-"+p+'-action="close"]',function(e){e.preventDefault(),i.close()}),i.$wrapper.on("click."+g,"[data-"+p+'-action="cancel"]',function(e){e.preventDefault(),i.$modal.trigger(y.CANCELLATION),i.settings.closeOnCancel&&i.close(y.CANCELLATION)}),i.$wrapper.on("click."+g,"[data-"+p+'-action="confirm"]',function(e){e.preventDefault(),i.$modal.trigger(y.CONFIRMATION),i.settings.closeOnConfirm&&i.close(y.CONFIRMATION)}),i.$wrapper.on("click."+g,function(e){t(e.target).hasClass(d("wrapper"))&&i.settings.closeOnOutsideClick&&i.close()})}var m,f,p="remodal",g=e.REMODAL_GLOBALS&&e.REMODAL_GLOBALS.NAMESPACE||p,v=t.map(["animationstart","webkitAnimationStart","MSAnimationStart","oAnimationStart"],function(e){return e+"."+g}).join(" "),_=t.map(["animationend","webkitAnimationEnd","MSAnimationEnd","oAnimationEnd"],function(e){return e+"."+g}).join(" "),b=t.extend({hashTracking:!0,closeOnConfirm:!0,closeOnCancel:!0,closeOnEscape:!0,closeOnOutsideClick:!0,modifier:"",appendTo:null},e.REMODAL_GLOBALS&&e.REMODAL_GLOBALS.DEFAULTS),w={CLOSING:"closing",CLOSED:"closed",OPENING:"opening",OPENED:"opened"},y={CONFIRMATION:"confirmation",CANCELLATION:"cancellation"},$=function(){var e=document.createElement("div").style;return e.animationName!==undefined||e.WebkitAnimationName!==undefined||e.MozAnimationName!==undefined||e.msAnimationName!==undefined||e.OAnimationName!==undefined}(),k=/iPad|iPhone|iPod/.test(navigator.platform);h.prototype.open=function(){var e,o=this;if(o.state!==w.OPENING&&o.state!==w.CLOSING){e=o.$modal.attr("data-"+p+"-id"),e&&o.settings.hashTracking&&(f=t(window).scrollTop(),location.hash=e);var n=null;m&&m!==o&&(n=m,n.$wrapper.addClass("remodal-is-stale")),m=o,a(),o.$bg.addClass(o.settings.modifier),o.$overlay.addClass(o.settings.modifier).show(),o.$wrapper.show().scrollTop(0),o.$modal.focus(),s(function(){r(o,w.OPENING)},function(){r(o,w.OPENED)},o,n)}},h.prototype.close=function(e){var o=this;o.state!==w.OPENING&&o.state!==w.CLOSING&&o.state!==w.CLOSED&&(o.settings.hashTracking&&o.$modal.attr("data-"+p+"-id")===location.hash.substr(1)&&(location.hash="",t(window).scrollTop(f)),s(function(){r(o,w.CLOSING,!1,e)},function(){o.$bg.removeClass(o.settings.modifier),o.$overlay.removeClass(o.settings.modifier).hide(),o.$wrapper.hide(),i(),r(o,w.CLOSED,!1,e)},o))},h.prototype.getState=function(){return this.state},h.prototype.destroy=function(){var e,o=t[p].lookup;l(this),this.$wrapper.remove(),delete o[this.index],0===(e=t.grep(o,function(e){return!!e}).length)&&(this.$overlay.remove(),this.$bg.removeClass(d("is",w.CLOSING)+" "+d("is",w.OPENING)+" "+d("is",w.CLOSED)+" "+d("is",w.OPENED)))},t[p]={lookup:[]},t.fn[p]=function(e){var o,n;return this.each(function(a,i){n=t(i),null==n.data(p)?(o=new h(n,e),n.data(p,o.index),o.settings.hashTracking&&n.attr("data-"+p+"-id")===location.hash.substr(1)&&o.open()):o=t[p].lookup[n.data(p)]}),o},t(document).ready(function(){t(document).on("click","[data-"+p+"-target]",function(e){e.preventDefault();var o=e.currentTarget,n=o.getAttribute("data-"+p+"-target"),a=t("[data-"+p+'-id="'+n+'"]');t[p].lookup[a.data(p)].open()}),t(document).find("."+g).each(function(e,o){var n=t(o),a=n.data(p+"-options");a?("string"==typeof a||a instanceof String)&&(a=c(a)):a={},n[p](a)}),t(document).on("keydown."+g,function(e){m&&m.settings.closeOnEscape&&m.state===w.OPENED&&27===e.keyCode&&m.close()}),t(window).on("hashchange."+g,u)})}),function(e){"use strict";var t=function(t,o){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,o),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.select=this.options.select||this.select,this.autoSelect="boolean"!=typeof this.options.autoSelect||this.options.autoSelect,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.delay="number"==typeof this.options.delay?this.options.delay:250,this.$menu=e(this.options.menu),this.shown=!1,this.listen(),this.showHintOnFocus="boolean"==typeof this.options.showHintOnFocus&&this.options.showHintOnFocus};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").data("value");return(this.autoSelect||e)&&this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},setSource:function(e){this.source=e},show:function(){var t,o=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return t="function"==typeof this.options.scrollHeight?this.options.scrollHeight.call():this.options.scrollHeight,this.$menu.insertAfter(this.$element).css({top:o.top+o.height+t,left:o.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var o;if(this.query=void 0!==t&&null!==t?t:this.$element.val()||"",this.query.length<this.options.minLength)return this.shown?this.hide():this;var n=e.proxy(function(){(o=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source)&&this.process(o)},this);clearTimeout(this.lookupWorker),this.lookupWorker=setTimeout(n,this.delay)},process:function(t){var o=this;return t=e.grep(t,function(e){return o.matcher(e)}),t=this.sorter(t),t.length?"all"==this.options.items?this.render(t).show():this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,o=[],n=[],a=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?n.push(t):a.push(t):o.push(t);return o.concat(n,a)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var o=this;return t=e(t).map(function(t,n){return t=e(o.options.item).data("value",n),t.html(o.highlighter(n)),t[0]}),this.autoSelect&&t.first().addClass("active"),this.$menu.html(t),this},next:function(){var t=this.$menu.find(".active").removeClass("active"),o=t.next();o.length||(o=e(this.$menu.find("li")[0])),o.addClass("active")},prev:function(){var e=this.$menu.find(".active").removeClass("active"),t=e.prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},destroy:function(){this.$element.data("typeahead",null),this.$element.off("focus").off("blur").off("keypress").off("keyup"),this.eventSupported("keydown")&&this.$element.off("keydown"),this.$menu.remove()},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.shown||40!=t.keyCode?this.move(t):this.lookup("")},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(){this.focused||(this.focused=!0,(0===this.options.minLength&&!this.$element.val()||this.options.showHintOnFocus)&&this.lookup())},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var o=e.fn.typeahead;e.fn.typeahead=function(o){var n=arguments;return this.each(function(){var a=e(this),i=a.data("typeahead"),r="object"==typeof o&&o;i||a.data("typeahead",i=new t(this,r)),"string"==typeof o&&(n.length>1?i[o].apply(i,Array.prototype.slice.call(n,1)):i[o]())})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1,scrollHeight:0,autoSelect:!0},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=o,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var t=e(this);t.data("typeahead")||t.typeahead(t.data())})}(window.jQuery),tlite.show=function(e,t,o){function n(e,t){function n(){d=e.title||d,e.title="",d&&!c&&(c=setTimeout(s,o?150:1))}function i(){tlite.hide(e,!0)}function r(t){o===t&&(c=clearTimeout(c),l&&e.removeChild(l),l=undefined)}function s(){l||(l=a(e,d,t))}var l,c,d;return e.addEventListener("mouseleave",i),e.tooltip={show:n,hide:r}}function a(e,t,o){var n=document.createElement("span"),a=o.grav||"n";n.className="tlite "+(a?"tlite-"+a:""),n.textContent=t,e.appendChild(n);var i=10,r=e.offsetTop,s=e.offsetLeft
;n.offsetParent===e&&(r=s=0);var l=e.offsetWidth,c=e.offsetHeight,d=n.offsetHeight,u=n.offsetWidth,h=s+l/2,m=a[0],f=a[1];return n.style.top=("s"===m?r-d-i:"n"===m?r+c+i:r+c/2-d/2)+"px",n.style.left=("w"===f?s:"e"===f?s+l-u:"w"===m?s+l+i:"e"===m?s-u-i:h-u/2)+"px",n.className+=" tlite-visible",n}t=t||{},(e.tooltip||n(e,t)).show()},tlite.hide=function(e,t){e.tooltip&&e.tooltip.hide(t)},tlite.hideAll=function(e,t){for(var o=0;o<e.length;o++)el=e[o].parentElement,tlite.hide(el,t)},"undefined"!=typeof module&&module.exports&&(module.exports=tlite),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom"),require("react-dom/server")):"function"==typeof define&&define.amd?define(["react","react-dom","react-dom/server"],t):"object"==typeof exports?exports.ReactRailsUJS=t(require("react"),require("react-dom"),require("react-dom/server")):e.ReactRailsUJS=t(e.React,e.ReactDOM,e.ReactDOMServer)}(this,function(__WEBPACK_EXTERNAL_MODULE_3__,__WEBPACK_EXTERNAL_MODULE_4__,__WEBPACK_EXTERNAL_MODULE_5__){return function(e){function t(n){if(o[n])return o[n].exports;var a=o[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var o={};return t.m=e,t.c=o,t.i=function(e){return e},t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(module,exports){var topLevel="undefined"==typeof window?this:window;module.exports=function(className){var constructor;return constructor=topLevel[className],constructor||(constructor=eval(className)),constructor&&constructor["default"]&&(constructor=constructor["default"]),constructor}},function(e,t,o){var n=o(7),a=o(8),i=o(9),r=o(11),s=o(10);e.exports=function(e){e.handleEvent&&("undefined"!=typeof Turbolinks.EVENTS&&s.teardown(e),i.teardown(e),r.teardown(e),a.teardown(e),n.teardown(e)),e.jQuery?(e.handleEvent=function(t,o){e.jQuery(document).on(t,o)},e.removeEvent=function(t,o){e.jQuery(document).off(t,o)}):"addEventListener"in window?(e.handleEvent=function(e,t){document.addEventListener(e,t)},e.removeEvent=function(e,t){document.removeEventListener(e,t)}):(e.handleEvent=function(e,t){window.attachEvent(e,t)},e.removeEvent=function(e,t){window.detachEvent(e,t)}),"undefined"!=typeof Turbolinks&&Turbolinks.supported?"undefined"!=typeof Turbolinks.EVENTS?s.setup(e):"undefined"!=typeof Turbolinks.controller?i.setup(e):r.setup(e):"undefined"!=typeof $&&"function"==typeof $.pjax?a.setup(e):n.setup(e)}},function(e,t,o){var n=o(0),a=o(12);e.exports=function(e){var t=a(e);return function(e){var o;try{o=t(e)}catch(t){try{o=n(e)}catch(e){console.error(t),console.error(e)}}return o}}},function(e){e.exports=__WEBPACK_EXTERNAL_MODULE_3__},function(e){e.exports=__WEBPACK_EXTERNAL_MODULE_4__},function(e){e.exports=__WEBPACK_EXTERNAL_MODULE_5__},function(e,t,o){var n=o(3),a=o(4),i=o(5),r=o(1),s=o(0),l=o(2),c={CLASS_NAME_ATTR:"data-react-class",PROPS_ATTR:"data-react-props",jQuery:"undefined"!=typeof window&&"undefined"!=typeof window.jQuery&&window.jQuery,findDOMNodes:function(e){var t,o,n=c.CLASS_NAME_ATTR;switch(typeof e){case"undefined":t="["+n+"]",o=document;break;case"object":t="["+n+"]",o=e;break;case"string":t=e+"["+n+"], "+e+" ["+n+"]",o=document}return c.jQuery?c.jQuery(t,o):o.querySelectorAll(t)},getConstructor:s,useContext:function(e){this.getConstructor=l(e)},serverRender:function(e,t,o){var a=this.getConstructor(t),r=n.createElement(a,o);return i[e](r)},mountComponents:function(e){for(var t=c,o=t.findDOMNodes(e),i=0;i<o.length;++i){var r=o[i],s=r.getAttribute(t.CLASS_NAME_ATTR),l=t.getConstructor(s),d=r.getAttribute(t.PROPS_ATTR),u=d&&JSON.parse(d);if(!l){var h="Cannot find component: '"+s+"'";throw console&&console.log&&console.log("%c[react-rails] %c"+h+" for element","font-weight: bold","",r),new Error(h+". Make sure your component is available to render.")}a.render(n.createElement(l,u),r)}},unmountComponents:function(e){for(var t=c.findDOMNodes(e),o=0;o<t.length;++o){var n=t[o];a.unmountComponentAtNode(n)}},detectEvents:function(){r(this)}};c.handleMount=function(e){var t=undefined;e&&e.target&&(t=e.target),c.mountComponents(t)},c.handleUnmount=function(e){var t=undefined;e&&e.target&&(t=e.target),c.unmountComponents(t)},"undefined"!=typeof window&&c.detectEvents(),self.ReactRailsUJS=c,e.exports=c},function(e){e.exports={setup:function(e){e.jQuery?e.handleEvent("ready",e.handleMount):"addEventListener"in window?e.handleEvent("DOMContentLoaded",e.handleMount):e.handleEvent("onload",e.handleMount)},teardown:function(e){e.removeEvent("ready",e.handleMount),e.removeEvent("DOMContentLoaded",e.handleMount),e.removeEvent("onload",e.handleMount)}}},function(e){e.exports={setup:function(e){e.handleEvent("ready",e.handleMount),e.handleEvent("pjax:end",e.handleMount),e.handleEvent("pjax:beforeReplace",e.handleUnmount)},teardown:function(e){e.removeEvent("ready",e.handleMount),e.removeEvent("pjax:end",e.handleMount),e.removeEvent("pjax:beforeReplace",e.handleUnmount)}}},function(e){e.exports={setup:function(e){e.handleEvent("DOMContentLoaded",e.handleMount),e.handleEvent("turbolinks:render",e.handleMount),e.handleEvent("turbolinks:before-render",e.handleUnmount)},teardown:function(e){e.removeEvent("DOMContentLoaded",e.handleMount),e.removeEvent("turbolinks:render",e.handleMount),e.removeEvent("turbolinks:before-render",e.handleUnmount)}}},function(e){e.exports={setup:function(e){e.handleEvent(Turbolinks.EVENTS.CHANGE,e.handleMount),e.handleEvent(Turbolinks.EVENTS.BEFORE_UNLOAD,e.handleUnmount)},teardown:function(e){e.removeEvent(Turbolinks.EVENTS.CHANGE,e.handleMount),e.removeEvent(Turbolinks.EVENTS.BEFORE_UNLOAD,e.handleUnmount)}}},function(e){e.exports={setup:function(e){Turbolinks.pagesCached(0),e.handleEvent("page:change",e.handleMount),e.handleEvent("page:receive",e.handleUnmount)},teardown:function(e){e.removeEvent("page:change",e.handleMount),e.removeEvent("page:receive",e.handleUnmount)}}},function(e){e.exports=function(e){return function(t){var o=t.split("."),n=o.shift(),a=o,i=e("./"+n);return a.forEach(function(e){i=i[e]}),i.__esModule&&(i=i["default"]),i}}}])}),function(e,t,o){"use strict";var n,a,i,r,s,l,c,d,u,h,m,f,p,g,v;e.MessageBus;s=function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t,o;return t=16*Math.random()|0,o="x"===e?t:3&t|8,o.toString(16)})},a=s(),n=[],i=0,l="/",f=!1,p=[],v=0,g=e.jQuery;var _;!function(){for(var e=["","webkit","ms","moz"],n=0;n<e.length;n++){var a=e[n],i=a+(""===a?"hidden":"Hidden");t[i]!==o&&(_=i)}}();var b=function(){return _!==o?t[_]:!t.hasFocus},w=null===(new XMLHttpRequest).onprogress,y=function(){return c.enableChunkedEncoding&&w};r=function(){return c.alwaysLongPoll||!b()};var $,k=0,C=0,j=function(e){var t=!1;if(!e)return!1;for(var a=0;a<e.length;a++){var i=e[a];t=!0;for(var r=0;r<n.length;r++){var s=n[r];if(s.channel===i.channel){s.last_id=i.message_id;try{s.func(i.data,i.global_id,i.message_id)}catch(e){console.log&&console.log("MESSAGE BUS FAIL: callback "+s.channel+" caused exception "+e.message)}}"/__status"===i.channel&&i.data[s.channel]!==o&&(s.last_id=i.data[s.channel])}}return t},x=function(e){if(i=0,!f)return j(e);if(e)for(var t=0;t<e.length;t++)p.push(e[t]);return!1};h=function(e,t){var o=!1,n=!1;$=new Date,C+=1,t.__seq=C;var a=r()&&c.enableLongPolling,s=a&&y();v>0&&(v--,s=!1);var l={"X-SILENCE-LOGGER":"true"};for(var d in c.headers)l[d]=c.headers[d];s||(l["Dont-Chunk"]="true");var u=s?"text":"json",h=function(e,o){var n="\r\n|\r\n",a=e.indexOf(n,o);if(-1===a)return o;var i=e.substring(o,a);i=i.replace(/\r\n\|\|\r\n/g,n);try{x(JSON.parse(i))}catch(e){console.log&&(console.log("FAILED TO PARSE CHUNKED REPLY"),console.log(t))}return h(e,a+n.length)},f=function(){c.longPoll&&(c.longPoll.abort(),v=30)};if(!c.ajax)throw new Error("Either jQuery or the ajax adapter must be loaded");return c.ajax({url:c.baseUrl+"message-bus/"+c.clientId+"/poll"+(a?"":"?dlp=t"),data:t,cache:!1,async:!0,dataType:u,type:"POST",headers:l,messageBus:{chunked:s,onProgressListener:function(e){var t=0,o=setTimeout(f,3e3);return e.onprogress=function(){clearTimeout(o),"application/json; charset=utf-8"===e.getResponseHeader("Content-Type")?s=!1:t=h(e.responseText,t)}}},xhr:function(){var e=g.ajaxSettings.xhr();return s?(this.messageBus.onProgressListener(e),e):e},success:function(e){s||("string"==typeof e&&(e=JSON.parse(e)),o=x(e))},error:function(e,t){"abort"===t?n=!0:(i+=1,k+=1)},complete:function(){var t;try{o||n?t=100:(t=c.callbackInterval,i>2?t*=i:r()||(t=c.backgroundCallbackInterval),t>c.maxPollInterval&&(t=c.maxPollInterval),(t-=new Date-$)<100&&(t=100))}catch(e){console.log&&e.message&&console.log("MESSAGE BUS FAIL: "+e.message)}m=setTimeout(function(){m=null,e()},t),c.longPoll=null}})},c={enableChunkedEncoding:!0,enableLongPolling:!0,callbackInterval:15e3,backgroundCallbackInterval:6e4,maxPollInterval:18e4,callbacks:n,clientId:a,alwaysLongPoll:!1,baseUrl:l,headers:{},ajax:g&&g.ajax,noConflict:function(){return e.MessageBus=e.MessageBus.previousMessageBus,this},diagnostics:function(){console.log("Stopped: "+u+" Started: "+d),console.log("Current callbacks"),console.log(n),console.log("Total ajax calls: "+C+" Recent failure count: "+i+" Total failures: "+k),console.log("Last ajax call: "+(new Date-$)/1e3+" seconds ago")},pause:function(){f=!0},resume:function(){f=!1,j(p),p=[]},stop:function(){u=!0,d=!1},start:function(){var o,a;d||(d=!0,u=!1,o=function(){var e;if(!u){if(0===n.length)return void(a||(a=setTimeout(function(){a=null,o()},500)));e={};for(var t=0;t<n.length;t++)e[n[t].channel]=n[t].last_id;c.longPoll=h(o,e)}},t.addEventListener&&"hidden"in t&&(c.visibilityEvent=e.document.addEventListener("visibilitychange",function(){t.hidden||c.longPoll||!m||(clearTimeout(m),m=null,o())})),o())},status:function(){if(f)return"paused";if(d)return"started";if(u)return"stopped";throw"Cannot determine current status"},subscribe:function(e,t,o){return d||u||c.start(),("number"!=typeof o||o<-1)&&(o=-1),n.push({channel:e,func:t,last_id:o}),c.longPoll&&c.longPoll.abort(),t},unsubscribe:function(e,t){var o;-1!==e.indexOf("*",e.length-1)&&(e=e.substr(0,e.length-1),o=!0);for(var a=!1,i=n.length-1;i>=0;i--){var r,s=n[i];r=o?s.channel.substr(0,e.length)!==e:s.channel!==e,!r&&t&&s.func!==t&&(r=!0),r||(n.splice(i,1),a=!0)}return a&&c.longPoll&&c.longPoll.abort(),a}},e.MessageBus=c}(window,document),String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.ltrim=function(){return this.replace(/^\s+/,"")},String.prototype.rtrim=function(){return this.replace(/\s+$/,"")},String.prototype.titleCase=function(){var e="",t=this.replace("_"," ").split(" ");for(keyvar in t)e+=" "+t[keyvar].substr(0,1).toUpperCase()+t[keyvar].substr(1,t[keyvar].length).toLowerCase();return e.ltrim()},String.prototype.pluralize=function(e){return 1==e?this:this+"s"},String.prototype.startsWith=function(e){return 0===this.lastIndexOf(e,0)};var loadDeferredStyles=function(){var e=document.getElementById("deferred-styles"),t=document.createElement("div");t.innerHTML=e.textContent,document.body.appendChild(t),e.parentElement.removeChild(e)},raf=requestAnimationFrame||mozRequestAnimationFrame||webkitRequestAnimationFrame||msRequestAnimationFrame;raf?raf(function(){window.setTimeout(loadDeferredStyles,0)}):window.addEventListener("load",loadDeferredStyles);var adjust=1,promo,promo_amount;!sessionStorage.session_id&&Modernizr.sessionstorage&&$.ajax({url:"/get_session_id",success:function(e){sessionStorage.session_id=e.session_id}});var jewlr_console={logs:[],log:function(){jewlr_console.logs.push(Array.from(arguments).join(", "))},warn:function(){jewlr_console.logs.push(Array.from(arguments).join(", "))},debug:function(){jewlr_console.logs.push(Array.from(arguments).join(", "))},error:function(){jewlr_console.logs.push(Array.from(arguments).join(", "))}},log_console="true"==Cookies.get("log_console")||!1;log_console||(console.log=jewlr_console.log,console.warn=jewlr_console.log,console.debug=jewlr_console.log,console.error=jewlr_console.log);var variation=1;if(alertify.set("notifier","position","bottom-left"),uri=new URI(window.location.href),uri.hasQuery("utm_campaign")){var utm_campaign=uri.search(!0).utm_campaign;Cookies.set("utm_campaign",utm_campaign,{expires:365}),setLiveChatVariable("utm_campaign",utm_campaign)}globalScale=1,globalZoomObjects=null,globalZoomStaticObjects=null,globalZoomMarginObjects=null,savedModalScrollPosition=0,window.lazySizesConfig=window.lazySizesConfig||{},window.lazySizesConfig.init=!1,window.lazySizesConfig.customMedia={"--mobile":"(max-width: 767px)","--desktop":"(min-width: 768px)"},$(document).ready(function(){function e(e){var t=(e.className||"").split(" ");return function(e,o){return~t.indexOf(e)&&o}}lazySizes.init(),initLocaleHandler(),initSiteHandlers(),initMenuHandlers(),initPageHandlers(),modalNavigation(),initSearchBox(),initVideoHandlers(),initProductLinkClickHandler(),initProductShareHandlers(),initCartWishListSHandlers(),submitSiftScienceTracking(),earlyBlackFridayABTest(),globalZoomObjects=$(".pure-hidden-zoom"),globalZoomStaticObjects=$(".pure-static-zoom"),globalZoomMarginObjects=$(".pure-margin-zoom"),reTip(),$.ajax({url:"/user_data",success:function(e){if(!e.nothing){$("meta[name=csrf-token]").attr("content",e.auth_token),$("input[name=authenticity_token]").val(e.auth_token),$(".js-cart-list-dropdown").html(e.cart_lists),$("#mobile-account").html(e.mobile_menu),$("#header-links").html(e.desktop_menu),updateCartCountNew(),updateWishListCountNew();for(var t=0;t<e.personalized_css_content.length;t++)personalize_css=e.personalized_css_content[t],$(personalize_css.selector).html(personalize_css.content);alertify.set("notifier","position","bottom-left"),e.page_notification&&window.setTimeout(function(){alertify.notify(e.page_notification.message,e.page_notification.icon,e.page_notification.notify_length),submit_ga_event_click("Notification","show",e.page_notification.name)},1e3*e.page_notification.delay),e.everywhere_notification&&window.setTimeout(function(){alertify.notify(e.everywhere_notification.message,e.everywhere_notification.icon,e.everywhere_notification.notify_length),submit_ga_event_click("Notification","show",e.everywhere_notification.name)},1e3*e.everywhere_notification.delay)}}}),$("body").on("gesturestart",function(e){if(!($(e.target).closest(".no-zoom-check").length>0)){var t=document.documentElement.clientWidth,o=window.innerWidth,n=t/o;globalScale=n}}),$("body").on("gesturechange",function(e){if(!($(e.target).closest(".no-zoom-check").length>0)){document.documentElement.clientWidth,window.innerWidth;e.originalEvent.scale>1&&(globalZoomObjects.addClass("pure-hidden-zoomed"),globalZoomStaticObjects.addClass("pure-static-zoomed"),globalZoomMarginObjects.addClass("pure-margin-zoomed"))}}),$("body").on("gestureend",function(e){if(!($(e.target).closest(".no-zoom-check").length>0)){var t=(document.documentElement.clientWidth,window.innerWidth,e.originalEvent.scale);globalScale+(t-1)/.14<1.1&&(globalZoomObjects.removeClass("pure-hidden-zoomed"),globalZoomStaticObjects.removeClass("pure-static-zoomed"),globalZoomMarginObjects.removeClass("pure-margin-zoomed"))}}),window.setInterval(function(){var e=document.documentElement.clientWidth,t=window.innerWidth,o=e/t;globalScale=o,globalScale>1?(globalZoomObjects.addClass("pure-hidden-zoomed"),globalZoomStaticObjects.addClass("pure-static-zoomed"),globalZoomMarginObjects.addClass("pure-margin-zoomed")):(globalZoomObjects.removeClass("pure-hidden-zoomed"),globalZoomStaticObjects.removeClass("pure-static-zoomed"),globalZoomMarginObjects.removeClass("pure-margin-zoomed"))},1e3),$(document).on("opening",".remodal",function(){console.log("Modal is opening"),document.documentElement.clientWidth<768&&($(".remodal-wrapper.just-opened").is("*")||(savedModalScrollPosition=$(window).scrollTop()),$("body").css("overflow","hidden").css("position","fixed"))}),$(document).on("closing",".remodal",function(){console.log("Modal is closing"),$("body").css("overflow","").css("position",""),savedModalScrollPosition>0&&($(window).scrollTop(savedModalScrollPosition),savedModalScrollPosition=0)}),$(document).on("click",".js-alert-close",function(){$(this).parents("#flashbar_container").remove()});var t=Cookies.getJSON("user_obj");if(t!==undefined&&t.guid_token!==undefined&&""!==t.guid_token){submit_ga_user_id(t.guid_token);(window._sift=window._sift||[]).push(["_setUserId",t.guid_token])}$("#email-login-form").submit(function(){return emailLogin(),!1}),adjust<1&&($("#promobar_container").html("Exclusive Jewlr VIP Sale! Save "+promo_amount+"% Site Wide. Hurry, offer ends Monday, June 22nd!").removeClass("hidden"),$("#vip-newsletter").remove()),$("a#_lpChatBtn img").show(),$("#toll_free_link").on("click",function(){try{$.ajax({type:"GET",async:!1,dataType:"json",url:"/api/v1/getETtime",success:function(e){var t=e.dayofweek,o=e.hour,n=e.min;return!(0==t||6==t||o<9||o>17||17==o&&n>=30)||(window.location.href="/info/contact_us",!1)},error:function(){return!0}})}catch(e){return!0}});try{jqueryReady()}catch(e){}tlite(function(t){var o=e(t);return o("tooltip",{grav:"s"})||o("tooltip-n",{grav:"n"})||o("tooltip-s",{grav:"s"})||o("tooltip-w",{grav:"w"})||o("tooltip-e",{grav:"e"})||o("tooltip-se",{grav:"se"})||o("tooltip-ne",{grav:"ne"})||o("tooltip-sw",{grav:"sw"})||o("tooltip-nw",{grav:"nw"})}),$("img.deferred").each(function(){var e=$(this).data("defer-src");e!==undefined&&""!==e&&$(this).attr("src",e)}),Cookies.get("subscribed"),$(".vip-optout").click(function(e){e.stopPropagation(),Cookies.set("subscribed","declined",{expires:30}),submit_ga_event_click("Newsletter","decline","vip"),$("#newsletterModal").modal("hide"),$("#vip-newsletter").remove()}),$("#vip-newsletter").click(function(){submit_ga_event_click("Newsletter","modal-open","vip")}),$(document).on("closing","#modal_facebook_login",function(e){if(!e.reason||"confirmation"!=e.reason){Cookies.set("facebook_declined",!0,{expires:14});submit_ga_event_click("Continue with FB","decline_at_modal")}}),$("#modal_facebook_login,#modal_login").on("click",".modal-facebook-login__button",function(){facebookDoLogin()}),$("#js_mobile_menu").on("click",".js-log-in-link,.js-log-out-link",function(){$("#js_menu_toggle").click()}),$("#js_mobile_menu, .header").on("click",".js-log-out-link",function(){doLogout()}),$(".js-account-link").on("click",function(){if(null!=Cookies.get("access_token")){var e=$('<form action="'+window.jewlr.config.secure_url+'/oauth/redirect" method="POST"><input type="hidden" name="access_token" value="'+Cookies.get("access_token")+'"><input type="hidden" name="redirect_path" value="/account"><input type="hidden" name="locale" value="'+window.jewlr.locale+'"></form>');return $(document.body).append(e),e.submit(),!1}}),$(".social_wishlist_link").click(function(){return response=FB.getAuthResponse(),console.log(response.accessToken),console.log(response.userID),window.location.href=$(this).attr("href")+"?fb_access_token="+response.accessToken+"&fb_uid="+response.userID,!1})}),$(".mobile-search").click(function(){closeMobileSearchbar()});var global_store_pref_flag=!0;window.closeModal=function(){$("#jewlrModal").modal("hide")},$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){e[this.name]!==undefined?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},$(".js-search-input ").focus(function(){$(this).addClass("expand").attr("placeholder","Search rings, necklaces and more..."),$(".js-d-search-close").addClass("show")}).blur(function(){0===$(this).val().length&&($(this).removeClass("expand"),$(".js-d-search-close").removeClass("show")),$(this).attr("placeholder","search Jewelzhq..")}),$(".js-d-search-close").on("click",function(){$(this).removeClass("show"),$(".js-search-input ").removeClass("expand").val("").blur()}),function(e,t){var o=t(e,e.document);e.lazySizes=o,"object"==typeof module&&module.exports&&(module.exports=o)}(window,function(e,t){"use strict";if(t.getElementsByClassName){var o,n,a=t.documentElement,i=e.Date,r=e.HTMLPictureElement,s="addEventListener",l="getAttribute",c=e[s],d=e.setTimeout,u=e.requestAnimationFrame||d,h=e.requestIdleCallback,m=/^picture$/i,f=["load","error","lazyincluded","_lazyloaded"],p={},g=Array.prototype.forEach,v=function(e,t){return p[t]||(p[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),p[t].test(e[l]("class")||"")&&p[t]},_=function(e,t){v(e,t)||e.setAttribute("class",(e[l]("class")||"").trim()+" "+t)},b=function(e,t){var o;(o=v(e,t))&&e.setAttribute("class",(e[l]("class")||"").replace(o," "))},w=function(e,t,o){var n=o?s:"removeEventListener";o&&w(e,t),f.forEach(function(o){e[n](o,t)})},y=function(e,n,a,i,r){var s=t.createEvent("CustomEvent");return a||(a={}),a.instance=o,s.initCustomEvent(n,!i,!r,a),e.dispatchEvent(s),s},$=function(t,o){var a;!r&&(a=e.picturefill||n.pf)?a({reevaluate:!0,elements:[t]}):o&&o.src&&(t.src=o.src)},k=function(e,t){return(getComputedStyle(e,null)||{})[t]},C=function(e,t,o){for(o=o||e.offsetWidth;o<n.minSize&&t&&!e._lazysizesWidth;)o=t.offsetWidth,t=t.parentNode;return o},j=function(){var e,o,n=[],a=[],i=n,r=function(){var t=i;for(i=n.length?a:n,e=!0,o=!1;t.length;)t.shift()();e=!1},s=function(n,a){e&&!a?n.apply(this,arguments):(i.push(n),o||(o=!0,(t.hidden?d:u)(r)))};return s._lsFlush=r,s}(),x=function(e,t){return t?function(){j(e)}:function(){var t=this,o=arguments;j(function(){e.apply(t,o)})}},E=function(e){var t,o=0,n=666,a=n,r=function(){t=!1,o=i.now(),e()},s=h?function(){h(r,{timeout:a}),a!==n&&(a=n)}:x(function(){d(r)},!0);return function(e){var n;(e=!0===e)&&(a=44),t||(t=!0,n=125-(i.now()-o),0>n&&(n=0),e||9>n&&h?s():d(s,n))}},S=function(e){var t,o,n=99,a=function(){t=null,e()},r=function(){var e=i.now()-o;n>e?d(r,n-e):(h||a)(a)};return function(){o=i.now(),t||(t=d(r,n))}},z=function(){var r,u,h,f,p,C,z,L,O,T,M,P,N,R,I=/^img$/i,D=/^iframe$/i,B="onscroll"in e&&!/glebot/.test(navigator.userAgent),F=0,U=0,W=0,H=-1,q=function(e){W--,e&&e.target&&w(e.target,q),(!e||0>W||!e.target)&&(W=0)},G=function(e,o){var n,i=e,r="hidden"==k(t.body,"visibility")||"hidden"!=k(e,"visibility");for(L-=o,M+=o,O-=o,T+=o;r&&(i=i.offsetParent)&&i!=t.body&&i!=a;)(r=(k(i,"opacity")||1)>0)&&"visible"!=k(i,"overflow")&&(n=i.getBoundingClientRect(),r=T>n.left&&O<n.right&&M>n.top-1&&L<n.bottom+1);return r},V=function(){var e,i,s,c,d,h,m,p,g,v=o.elements;if((f=n.loadMode)&&8>W&&(e=v.length)){i=0,H++,null==N&&("expand"in n||(n.expand=a.clientHeight>500&&a.clientWidth>500?500:370),P=n.expand,N=P*n.expFactor),N>U&&1>W&&H>2&&f>2&&!t.hidden?(U=N,H=0):U=f>1&&H>1&&6>W?P:F;for(;e>i;i++)if(v[i]&&!v[i]._lazyRace)if(B)if((p=v[i][l]("data-expand"))&&(h=1*p)||(h=U),g!==h&&(C=innerWidth+h*R,z=innerHeight+h,m=-1*h,g=h),s=v[i].getBoundingClientRect(),(M=s.bottom)>=m&&(L=s.top)<=z&&(T=s.right)>=m*R&&(O=s.left)<=C&&(M||T||O||L)&&(n.loadHidden||"hidden"!=k(v[i],"visibility"))&&(u&&3>W&&!p&&(3>f||4>H)||G(v[i],h))){if(te(v[i]),d=!0,W>9)break}else!d&&u&&!c&&4>W&&4>H&&f>2&&(r[0]||n.preloadAfterLoad)&&(r[0]||!p&&(M||T||O||L||"auto"!=v[i][l](n.sizesAttr)))&&(c=r[0]||v[i]);else te(v[i]);c&&!d&&te(c)}},J=E(V),Z=function(e){_(e.target,n.loadedClass),b(e.target,n.loadingClass),w(e.target,K),y(e.target,"lazyloaded")},Q=x(Z),K=function(e){Q({target:e.target})},X=function(e,t){try{e.contentWindow.location.replace(t)}catch(o){e.src=t}},Y=function(e){var t,o=e[l](n.srcsetAttr);(t=n.customMedia[e[l]("data-media")||e[l]("media")])&&e.setAttribute("media",t),o&&e.setAttribute("srcset",o)},ee=x(function(e,t,o,a,i){var r,s,c,u,f,p;(f=y(e,"lazybeforeunveil",t)).defaultPrevented||(a&&(o?_(e,n.autosizesClass):e.setAttribute("sizes",a)),s=e[l](n.srcsetAttr),r=e[l](n.srcAttr),i&&(c=e.parentNode,u=c&&m.test(c.nodeName||"")),p=t.firesLoad||"src"in e&&(s||r||u),f={target:e},p&&(w(e,q,!0),clearTimeout(h),h=d(q,2500),_(e,n.loadingClass),w(e,K,!0)),u&&g.call(c.getElementsByTagName("source"),Y),s?e.setAttribute("srcset",s):r&&!u&&(D.test(e.nodeName)?X(e,r):e.src=r),i&&(s||u)&&$(e,{src:r})),e._lazyRace&&delete e._lazyRace,b(e,n.lazyClass),j(function(){(!p||e.complete&&e.naturalWidth>1)&&(p?q(f):W--,Z(f))},!0)}),te=function(e){var t,o=I.test(e.nodeName),a=o&&(e[l](n.sizesAttr)||e[l]("sizes")),i="auto"==a;(!i&&u||!o||!e[l]("src")&&!e.srcset||e.complete||v(e,n.errorClass))&&(t=y(e,"lazyunveilread").detail,i&&A.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,W++,ee(e,t,i,a,o))},oe=function(){if(!u){if(i.now()-p<999)return void d(oe,999);var e=S(function(){n.loadMode=3,J()});u=!0,n.loadMode=3,J(),c("scroll",function(){3==n.loadMode&&(n.loadMode=2),e()},!0)}};return{_:function(){p=i.now(),o.elements=t.getElementsByClassName(n.lazyClass),r=t.getElementsByClassName(n.lazyClass+" "+n.preloadClass),R=n.hFac,c("scroll",J,!0),c("resize",J,!0),e.MutationObserver?new MutationObserver(J).observe(a,{childList:!0,subtree:!0,attributes:!0}):(a[s]("DOMNodeInserted",J,!0),a[s]("DOMAttrModified",J,!0),setInterval(J,999)),c("hashchange",J,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(e){t[s](e,J,!0)}),/d$|^c/.test(t.readyState)?oe():(c("load",oe),t[s]("DOMContentLoaded",J),d(oe,2e4)),o.elements.length?(V(),j._lsFlush()):J()},checkElems:J,unveil:te}}(),A=function(){var e,o=x(function(e,t,o,n){var a,i,r;if(e._lazysizesWidth=n,n+="px",e.setAttribute("sizes",n),m.test(t.nodeName||""))for(a=t.getElementsByTagName("source"),i=0,r=a.length;r>i;i++)a[i].setAttribute("sizes",n);o.detail.dataAttr||$(e,o.detail)}),a=function(e,t,n){var a,i=e.parentNode;i&&(n=C(e,i,n),a=y(e,"lazybeforesizes",{width:n,dataAttr:!!t}),a.defaultPrevented||(n=a.detail.width)&&n!==e._lazysizesWidth&&o(e,i,a,n))},i=function(){var t,o=e.length;if(o)for(t=0;o>t;t++)a(e[t])},r=S(i);return{_:function(){e=t.getElementsByClassName(n.autosizesClass),c("resize",r)},checkElems:r,updateElem:a}}(),L=function(){L.i||(L.i=!0,A._(),z._())};return function(){var t,o={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0};n=e.lazySizesConfig||e.lazysizesConfig||{};for(t in o)t in n||(n[t]=o[t]);e.lazySizesConfig=n,d(function(){n.init&&L()})}(),o={cfg:n,autoSizer:A,loader:z,init:L,uP:$,aC:_,rC:b,hC:v,fire:y,gW:C,rAF:j}}}),function(e){"use strict";var t=document.documentElement,o=function(){if(e.lazySizes&&!e.lazySizes.getCustomMedias){var n=e.lazySizes;n.getCustomMedias=function(){var e=/['"]/g,t=/\s*\|\s*/g,o=/^([a-z0-9_-]+)\s*:\s*(.+)$/i,a=function(t,o){return((getComputedStyle(t,o)||{getPropertyValue:function(){}}).getPropertyValue("content")||"none").replace(e,"").trim()},i=function(e,n){e.split(t).forEach(function(e){e.match(o)&&(n[RegExp.$1]=RegExp.$2)})};return function(e,t){return e=e||n.cfg.customMedia,t=t||document.querySelector("html"),i(a(t,":before"),e),i(a(t,":after"),e),e}}(),n.updateCustomMedia=function(){var e,o,a,i=t.querySelectorAll("source[media][data-media][srcset]");for(n.getCustomMedias(),e=0,o=i.length;o>e;e++)(a=n.cfg.customMedia[i[e].getAttribute("data-media")||i[e].getAttribute("media")])&&i[e].setAttribute("media",a);for(i=t.querySelector("source[media][data-media][srcset] ~ img"),e=0,o=i.length;o>e;e++)n.uP(i[e]);n.autoSizer.checkElems()},n.getCustomMedias(),t.removeEventListener("lazybeforeunveil",o)}};e.addEventListener&&(t.addEventListener("lazybeforeunveil",o),o(),setTimeout(o))}(window),function(e,t){var o=function(){t(e.lazySizes),e.removeEventListener("lazyunveilread",o,!0)};t=t.bind(null,e,e.document),"object"==typeof module&&module.exports?t(require("lazysizes")):e.lazySizes?o():e.addEventListener("lazyunveilread",o,!0)}(window,function(e,t,o){"use strict";if(e.addEventListener){var n=/\s+/g,a=/\s*\|\s+|\s+\|\s*/g,i=/^(.+?)(?:\s+\[\s*(.+?)\s*\])?$/,r=/\(|\)|'/,s={contain:1,cover:1},l=function(e){var t=o.gW(e,e.parentNode);return(!e._lazysizesWidth||t>e._lazysizesWidth)&&(e._lazysizesWidth=t),e._lazysizesWidth},c=function(e){var t;return t=(getComputedStyle(e)||{getPropertyValue:function(){}}).getPropertyValue("background-size"),!s[t]&&s[e.style.backgroundSize]&&(t=e.style.backgroundSize),t},d=function(e,o,r){var s=t.createElement("picture"),l=o.getAttribute(lazySizesConfig.sizesAttr),c=o.getAttribute("data-ratio"),d=o.getAttribute("data-optimumx");o._lazybgset&&o._lazybgset.parentNode==o&&o.removeChild(o._lazybgset),Object.defineProperty(r,"_lazybgset",{value:o,writable:!0}),Object.defineProperty(o,"_lazybgset",{value:s,writable:!0}),e=e.replace(n," ").split(a),s.style.display="none",r.className=lazySizesConfig.lazyClass,1!=e.length||l||(l="auto"),e.forEach(function(e){var o=t.createElement("source");l&&"auto"!=l&&o.setAttribute("sizes",l),e.match(i)&&(o.setAttribute(lazySizesConfig.srcsetAttr,RegExp.$1),RegExp.$2&&o.setAttribute("media",lazySizesConfig.customMedia[RegExp.$2]||RegExp.$2)),s.appendChild(o)}),l&&(r.setAttribute(lazySizesConfig.sizesAttr,l),o.removeAttribute(lazySizesConfig.sizesAttr),o.removeAttribute("sizes")),d&&r.setAttribute("data-optimumx",d),c&&r.setAttribute("data-ratio",c),s.appendChild(r),o.appendChild(s)},u=function(e){if(e.target._lazybgset){var t=e.target,n=t._lazybgset,a=t.currentSrc||t.src;a&&(n.style.backgroundImage="url("+(r.test(a)?JSON.stringify(a):a)+")"),t._lazybgsetLoading&&(o.fire(n,"_lazyloaded",{},!1,!0),delete t._lazybgsetLoading)}};addEventListener("lazybeforeunveil",function(e){var n,a,i;!e.defaultPrevented&&(n=e.target.getAttribute("data-bgset"))&&(i=e.target,a=t.createElement("img"),a.alt="",a._lazybgsetLoading=!0,e.detail.firesLoad=!0,d(n,i,a),setTimeout(function(){o.loader.unveil(a),o.rAF(function(){o.fire(a,"_lazyloaded",{},!0,!0),a.complete&&u({target:a})})}))}),t.addEventListener("load",u,!0),e.addEventListener("lazybeforesizes",function(e){if(e.detail.instance==o&&e.target._lazybgset&&e.detail.dataAttr){var t=e.target._lazybgset,n=c(t);s[n]&&(e.target._lazysizesParentFit=n,o.rAF(function(){e.target.setAttribute("data-parent-fit",n),e.target._lazysizesParentFit&&delete e.target._lazysizesParentFit}))}},!0),t.documentElement.addEventListener("lazybeforesizes",function(e){!e.defaultPrevented&&e.target._lazybgset&&e.detail.instance==o&&(e.detail.width=l(e.target._lazybgset))})}}),function(e,t){"use strict";if(e.addEventListener){var o=/\s+(\d+)(w|h)\s+(\d+)(w|h)/,n=/parent-fit["']*\s*:\s*["']*(contain|cover|width)/,a=/parent-container["']*\s*:\s*["']*(.+?)(?=(\s|$|,|'|"|;))/,i=/^picture$/i,r=function(e){return getComputedStyle(e,null)||{}},s={getParent:function(t,o){var n=t,a=t.parentNode;return o&&"prev"!=o||!a||!i.test(a.nodeName||"")||(a=a.parentNode),"self"!=o&&(n="prev"==o?t.previousElementSibling:o&&(a.closest||e.jQuery)?(a.closest?a.closest(o):jQuery(a).closest(o)[0])||a:a),n},getFit:function(e){var t,o,i=r(e),l=i.content||i.fontFamily,c={fit:e._lazysizesParentFit||e.getAttribute("data-parent-fit")};return!c.fit&&l&&(t=l.match(n))&&(c.fit=t[1]),c.fit?(o=e._lazysizesParentContainer||e.getAttribute("data-parent-container"),!o&&l&&(t=l.match(a))&&(o=t[1]),c.parent=s.getParent(e,o)):c.fit=i.objectFit,c},getImageRatio:function(t){var n,a,r,s,l=t.parentNode,c=l&&i.test(l.nodeName||"")?l.querySelectorAll("source, img"):[t];for(n=0;n<c.length;n++)if(t=c[n],a=t.getAttribute(lazySizesConfig.srcsetAttr)||t.getAttribute("srcset")||t.getAttribute("data-pfsrcset")||t.getAttribute("data-risrcset")||"",r=t.getAttribute("media"),r=lazySizesConfig.customMedia[t.getAttribute("data-media")||r]||r,a&&(!r||(e.matchMedia&&matchMedia(r)||{}).matches)){!(s=parseFloat(t.getAttribute("data-aspectratio")))&&a.match(o)&&(s="w"==RegExp.$2?RegExp.$1/RegExp.$3:RegExp.$3/RegExp.$1);break}return s},calculateSize:function(e,t){var o,n,a,i,r=this.getFit(e),s=r.fit,l=r.parent;return"width"==s||("contain"==s||"cover"==s)&&(a=this.getImageRatio(e))?(l?t=l.clientWidth:l=e,i=t,"width"==s?i=t:(n=l.clientHeight)>40&&(o=t/n)&&("cover"==s&&a>o||"contain"==s&&o>a)&&(i=t*(a/o)),i):t}},l=function(){e.lazySizes&&(lazySizes.parentFit||(lazySizes.parentFit=s),e.removeEventListener("lazyunveilread",l,!0))};e.addEventListener("lazyunveilread",l,!0),t.addEventListener("lazybeforesizes",function(e){if(!e.defaultPrevented){var t=e.target;e.detail.width=s.calculateSize(t,e.detail.width)}}),setTimeout(l)}}(window,document),function(e,t,o){e.fn.modalBox=function(e,t){return s[e]?s[e].call(this,t):"object"!=typeof e&&e||s.open.call(this,e),this},e.modalBox={},e.modalBox.defaults={
width:"auto",height:"auto",left:"auto",top:"auto",maxWidth:"100%",maxHeight:"100%",overlay:!0,iconClose:!1,keyClose:!0,bodyClose:!0,iconImg:"image/closeIcon.png",onOpen:function(){},onClose:function(){}},e.modalBox.close=function(){e(".iw-modalBox").each(function(){s.close.call(e(this))})};var n=function(t){27==t.keyCode&&e.modalBox.close()},a=function(t){t.data?s.close.call(t.data.modalBox):e.modalBox.close()},i=function(o){var n=o.data.img,a=o.data.elm;n.css({top:a.offset().top-e(t).scrollTop()-8+"px",left:a.offset().left-e(t).scrollLeft()+a.width()-8+"px",position:"fixed","z-index":"99999"})},r=function(){e("body").append('<div class="iw-modalOverlay"></div>'),e(".iw-modalOverlay").css({display:"block",width:"100%",height:"100%",position:"fixed",top:0,left:0,"z-index":"1000"})},s={open:function(s){s=e.extend({},e.modalBox.defaults,s);var l=this,c=l.width(),d=l.height(),u=l.outerWidth(),h=l.outerHeight(),m=e(t).width(),f=e(t).height(),p=Math.min(u,m)-(u-c),g=Math.min(h,f)-(h-d);l.data("iw-size",{width:c,height:d}).addClass("iw-modalBox"),"auto"!=s.width?l.css("width",s.width):l.width(p),"auto"!=s.height?l.css("height",s.height):l.height(g);var v="50%",_="50%",b=l.outerWidth()/2,w=l.outerHeight()/2;if("auto"!=s.left&&(_=s.left,b="0"),"auto"!=s.top&&(v=s.top,w="0"),l.css({top:v,left:_,position:"fixed",display:"block","max-height":s.maxHeight,"max-width":s.maxWidth,"margin-left":-b,"margin-top":-w,"z-index":"99999"}),s.overlay&&r(),s.iconClose&&l.outerWidth()<m-50&&l.outerHeight()<f-50){var y=Math.ceil(1e3*Math.random())+"close",$=e('<img src="'+s.iconImg+'" class="iw-closeImg" id="'+y+'"/>');l.attr("closeImg",y),$.bind("click",{modalBox:l},a),e(t).bind("resize.iw-modalBox",{img:$,elm:l},i),e(t).triggerHandler("resize.iw-modalBox"),e("body").append($)}if(s.keyClose&&e(o).bind("keyup.iw-modalBox",n),s.bodyClose){var k=e(".iw-modalOverlay");0===k.length&&(r(),k=e(".iw-modalOverlay"),k.css({background:"none"})),k.bind("click",a)}s.onOpen.call(this),l.data("closeFun",s.onClose)},close:function(){var n=this;if(n.data("iw-size")){var a=n.attr("closeImg");a&&(n.removeAttr("closeImg"),e("#"+a).remove()),n.css({display:"none"});var i=n.data("iw-size");n.width(i.width),n.height(i.height),n.data("closeFun").call(this),n.removeData("iw-size").removeData("closeFun").removeClass("iw-modalBox"),0===e(".iw-modalBox").length&&(e(".iw-modalOverlay").remove(),e(o).unbind("keyup.iw-modalBox"),e(t).unbind("resize.iw-modalBox"))}}}}(jQuery,window,document);