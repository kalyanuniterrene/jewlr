<!DOCTYPE html>
<html>
<?php $skin_url =  Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_SKIN);?>
<?php $home_url =  Mage::getBaseUrl();
$ratio = Mage::getSingleton('core/session')->getRatio();
$is_custom_editor = Mage::getSingleton('core/session')->getIscustom();
$canvas_type_editor = Mage::getSingleton('core/session')->getCanvastype();
?>

<?php //echo "sdkjfsdhf";echo $this->key; 
//Mage::getSingleton('core/session')->setHello('hello teko');
//echo Mage::getSingleton('core/session')->getHello();?>
    <!--Calling The Header part  -->
    <?php echo $this->getLayout()->createBlock('core/template')->setTemplate('canvassignages_liveeditor/header-editor.phtml')->toHtml(); ?>
    <!--End of calling-->
    <body>
    <!-- please wait div -->

    <div class="pleaseWait">
        <img src="<?php echo $skin_url?>frontend/revivalpixel/images/canvas_live_editor/images/Processing.gif" alt="">
    </div>

    <!-- after Save Popup -->
        <div class="modal afterOrder">
            <div class="low-res-modal">
                <div class="header">                    
                    <img src="<?php echo $skin_url?>frontend/revivalpixel/images/canvas_live_editor/images/orderPlaced.png" alt="">
                    <h4>Successfully added to cart</h4>
                </div>
                <div class="content">
                    <ul class="after_Order">
                        <li><a class="after_addtoCart" href="<?php echo $home_url?>checkout/cart"> Go to Cart </a></li>
                        <li><a class="after_addtoCart closethisPop" href="javascript:void(0)"> Stay Here </a></li>
                    </ul>
                   <!--  <div class="text-wrap">
                        <p>* The canvas will be saved by this Name</p>
                    </div> -->
                </div>
               <!--  <button type="button" class="close_low_res_popup" aria-label="Close">
                    <span aria-hidden="true">Minimize</span><img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/minimize-icon.png" alt="Minimize Icon">
                </button> -->
            </div>
        </div>
        <!-- image Editor -->


            <div id="contextualEditNav" class="contextualMenu draggable_active">
                  <ul class="context-menu-list">                    
                    <li id="photoRotation" class="create-icon-roate-photo photoRotation" title="Rotate">  

                        <span id="mb_tools" class="m_1page">Rotate</span>
                    </li>
                    <li id="move_container" class="create-icon-move move_container crop-button icon-disabled" title="move">
                        <span id="mb_tools" class="m_move">move</span>
                    </li>
                    <!-- <li id="crop_toggle" class="create-icon-crop crop-toggle crop-button" title="crop">
                        <span id="mb_tools" class="m_crop">crop</span>
                    </li> -->
                   <!--  <li id="swap-photos" class="create-icon-swap-photo swap-photos icon-disabled" title="swap">
                        <span id="mb_tools" class="m_swap">swap</span>
                    </li> -->
                    <li id="layer-up" class="create-icon-layer-up layer-up-mark icon-disabled" title="bring to front">
                        <span id="mb_tools" class="m_back">front</span>
                    </li>
                    <li id="layer-down" class="create-icon-layer-down layer-down-mark icon-disabled" title="send to back">
                        <span id="mb_tools" class="m_forward">back</span>
                    </li>
                    <li id="photoMaximize" class="photo-max create-icon-minimize photoMin" title="minimize">
                        <span id="mb_tools" class="m_fullphoto">minimize</span>
                    </li>
                    <!-- delete icon placement should be consistent across all builders  -->
                    <li id="canvasImageDelete" class="create-icon-delete delete crop-button" title="delete">
                        <span id="mb_tools" class="m_delete">delete</span>
                    </li>
                </ul>
                <div class="zoomSlider">
                    <a href="javascript:void(0)" class="zoomMinus zooms">-</a>
                    <a href="javascript:void(0)" class="zoomPlud zooms">+</a>
                    <input type="range" min=".1" max="3" step=".1" value="1" />
                </div>
            </div>
        
    
        <!-- Text editor --> 
        <div id="textEditorArea" class="draggable_active">

            <div class="editorOptions">
                <div class="allFontsArea hideFonts">
                    <a href="javascript:void(0)" class="closeThePopup" title="close"> <i class="fa fa-times" aria-hidden="true"></i> </a>
                    <div class="resizable-bar"><div class="resizable-icon"></div></div>
                    <div class="fontContents clearfix">
                        <div class="font-categories tool-category-headers">  
                            <div class="tool-category-header font-category">
                                <a href="javascript:void(0)" class="font-category-link" data-category-name="recently-used"> Recently Used (<span class="recently-used-font-count">12</span>)</a>
                            </div>
                                
                            
                            <div class="tool-category-header font-category selected">
                                <a href="javascript:void(0)" class="font-category-link" data-category-name="all-fonts"> All Fonts (152)</a>
                            </div>
                                
                            
                                <div class="tool-category-header font-category">
                                    <a href="javascript:void(0)" class="font-category-link" data-category-name="bold">Bold (16)</a>
                                </div>
                                <div class="tool-category-header font-category">
                                    <a href="javascript:void(0)" class="font-category-link" data-category-name="classic">Classic (24)</a>
                                </div>
                                <div class="tool-category-header font-category">
                                    <a href="javascript:void(0)" class="font-category-link" data-category-name="fun">Fun (25)</a>
                                </div>
                                <div class="tool-category-header font-category">
                                    <a href="javascript:void(0)" class="font-category-link" data-category-name="international">International (26)</a>
                                </div>
                                <div class="tool-category-header font-category">
                                    <a href="javascript:void(0)" class="font-category-link" data-category-name="modern">Modern (33)</a>
                                </div>
                                <div class="tool-category-header font-category">
                                    <a href="javascript:void(0)" class="font-category-link" data-category-name="script">Script (27)</a>
                                </div>
                                <div class="tool-category-header font-category">
                                    <a href="javascript:void(0)" class="font-category-link" data-category-name="symbols">Symbols (1)</a>
                                </div>
                        </div>
                        <!-- left category -->
                        <div class="font-list clearfix recently-used-font-list" >

                            <div class="tool-select-option font-option selected" data-font-family-name="arial"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="helvetica"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="myriad pro"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="delicious"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="verdana"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="georgia"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="courier"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="comic sans ms"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="impact"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="monaco"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="optima"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="hoefler text"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="plaster"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="engagement"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="AndantinoJF"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="AndantinoJF"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="AndantinoJF"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="AndantinoJF"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="AndantinoJF"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="AndantinoJF"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="AndantinoJF"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="AndantinoJF"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="AndantinoJF"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="AndantinoJF"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="AndantinoJF"></div>                            
                            <div class="tool-select-option font-option" data-font-family-name="AndantinoJF"></div>                            

                                                
                        </div>

                    </div>                   
                </div>
                <!-- all fornts area ends -->

                <div class="colorPickerArea hideFonts">
                     <a href="javascript:void(0)" class="closeThePopup" title="close"> <i class="fa fa-times" aria-hidden="true"></i> </a>
                    <div class="resizable-bar"><div class="resizable-icon"></div></div>
                    <div class="colorSliders"><input type="text"> <button class="setColorBtn"> Set Color </button> </div> 
                    <div class="randomColors"><ul></ul></div>
                </div>
                <div class="fontSizeArea hideFontSizePanel">
                                 <ul></ul>
                            </div>
               <div class="ulWrap">
                    <ul class="actionLists">
                        <li class="fontsArea">
                             
                            <!-- font size area -->
                            <div class="fontName">
                                <div unselectable="on" class="font-family-display-name">  Arial                               
                                </div>
                            </div>
                            <div class="fontSize">                           
                                <div unselectable="on" class="font-size-display">30</div> 
                            </div>
                        </li>  
                        <li class="textColors">
                            <div class="text-color-options"></div>
                        </li>
                        <li class="text-styles">
                            <div class="text-style-group" style="">
                                <div class="toolbar-button bold" title="Bold"></div>
                                <div class="toolbar-button italic" title="Italic"></div>
                                <div class="toolbar-button underline" title="Underline"></div>
                                <!-- <div class="toolbar-button leftjustify" title="Left Justify"></div>
                                <div class="toolbar-button centerjustify" title="Center Justify"></div>
                                <div class="toolbar-button rightjustify" title="Right Justify"></div> -->
                                <div class="toolbar-button rotate noSelect" title="Rotate"></div>
                                <div class="toolbar-button bringFront noSelect" title="Bring Front"></div>
                                <div class="toolbar-button sendBack noSelect" title="Send Back"></div>
                                <div class="toolbar-button delete noSelect" title="Delete"></div>
                            </div>
                        </li>                                      
                    </ul>
                </div>
                <div class="nextMore"></div>
                <div class="prevMore"></div>
            </div>
            <div class="editroPlace">
                <input type="text" class="editedText" placeholder="Enter the text">
            </div>
        </div>
        
        <?php 
            $sku = "custom-canvas-print";
            $opt_title = "Canvas Type";
            $product_data = $this->getLayout()->getBlockSingleton('Canvassignages_Liveeditor_Block_Monblock')->customCanvasPrint($sku,$opt_title);
            //print_r($product_data);
            ?>

            <?php 
                             if(empty($ratio))
                            {   
                                //echo "hudo";
                                 foreach($product_data as $canvas_data)
                                {
                                    $media_url = Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_MEDIA);
                                    $img_url = $canvas_data['img_url'];
                                    
                                     
                                    
                                    if($canvas_data['default']=="default")
                                    {
                                        $active = $canvas_data['option_label'];
                                        $width= $canvas_data['width'];
                                        
                                    }
                                           
                                           
                                           if(substr_count($active,"Rolled")>0) {
                                                        
                                                        
                                                        $val = "rolled_canvas";
                                            }
                                            
                                            if(substr_count($active,"Thin")>0) {
                                                        
                                                        
                                                        $val = "thin_gallery";
                                            }
                                            
                                            
                                            if(substr_count($active,"Thick")>0) {
                                                        
                                                        
                                                        $val = "thick_gallery";
                                            }
                                              $opt_title = $active." Size";
                                             $product_data_custom = $this->getLayout()->getBlockSingleton('Canvassignages_Liveeditor_Block_Monblock')->customCanvasPrint($sku,$opt_title);
                                                    
                                                    foreach($product_data_custom as $canvas_data_custom)
                                                    {
                                                         $default = $canvas_data_custom['default'];  
                                            
                                                         $canvas_type_option_title = $canvas_data_custom['default_title'];
                                                        
                                                        if($default=="default")
                                                        {
                                                            
                                                           $data_wh = explode('*',$canvas_type_option_title);
                                                           $price =  number_format((float)$canvas_data_custom['price'], 2, '.', '');
                                                        }
                                                    }
                                            
                                            
                                            
                                 }
                             }
                                 //getting data from the liveeditor
                                 else
                                 {
                                   $data_wh = explode('*',$ratio);
                                    if($canvas_type_editor !="")
                                 {
                                    
                                   if(substr_count($canvas_type_editor,"Rolled")>0) 
                                    {
                                                     $val = "rolled_canvas";
                                                      $active = "Rolled Cannvas";
                                            }
                                            
                                            if(substr_count($canvas_type_editor,"Thin")>0) {
                                                        
                                                        
                                                        $val = "thin_gallery";
                                                        $active = $canvas_type_editor;
                                            }
                                            
                                            
                                            if(substr_count($canvas_type_editor,"Thick")>0) {
                                                        
                                                        
                                                        $val = "thick_gallery";
                                                        $active = $canvas_type_editor;
                                            }

                                    $opt_title = $canvas_type_editor." Size";
                                    $product_data_cus = $this->getLayout()->getBlockSingleton('Canvassignages_Liveeditor_Block_Monblock')->customCanvasPrint($sku,$opt_title);

                                    foreach($product_data_cus as $canvas_data)
                                    {
                                        $media_url = Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_MEDIA);
                                        $img_url = $canvas_data['img_url'];
                                        $canvas_type_option_title = $canvas_data['default_title'];
                                        $canvas_type_option_label = $canvas_data['option_label'];
                                        $canvas_data_type = str_replace(" ","_",strtolower($canvas_type_option_title));
                                        $canvas_type_redirect = str_replace(" ","-",($canvas_type_option_title));
                                        $default = $canvas_data['default'];  
                                        //$data_wh = explode('*',$canvas_type_option_title);
                                        $initial_price = $canvas_data['initial_price'];
                                       // $price = number_format((float)$canvas_data['price'], 2, '.', '');
                                        $checked= 'checked="checked"';
                                        $width= $canvas_data['width'];

                                        $ration_r = str_replace("*", "_", $ratio);
                                        $canvas_type_option_title_r = str_replace("*", "_", $canvas_type_option_title);
                                     
                                        if($ration_r == $canvas_type_option_title_r)
                                        {
                                            
                                            $price = number_format((float)$canvas_data['price'], 2, '.', '');
                                        }

                                    }


                                 }
                                 }   
                                   
                                        ?>
                                         

                                            
                                            
        
        <!-- input fields -->
        <div class="inputSets">

            <input type="text" id="imageurl" value="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/">    
            <input type="text" id="canvas_type" value="<?php echo $active;?>" data-width-border="<?php echo $width;?>" data-canvas-name="<?php echo $active;?>">

            <input type="hidden" id="cpr" value="<?php echo $price;?>"><!--Need to dynamic-->

            
            <input type="number" id="canvas_width" value="<?php echo $data_wh[0];?>">
            <input type="number" id="canvas_height" value="<?php echo $data_wh[1];?>">

            <input type="text" id="savedJSONdata" data-url="<?php echo  Mage::getUrl('editorsave/index')?>">
            
            <input type="text" id="orderData" data-url="<?php echo  Mage::getUrl('order/index')?>">

            <input type="text" id="hardware_option">
            <input type="text" id="photoRetouching" data-info="undefined">
            <input type="text" id="LaminationOption">

             <?php 
            $sku = "custom-canvas-print";
            $opt_title = "Wrap Border";
            $product_data = $this->getLayout()->getBlockSingleton('Canvassignages_Liveeditor_Block_Monblock')->customCanvasPrint($sku,$opt_title);
           // $canvas_width = array();
           $i=1;
            foreach($product_data as $canvas_data)
            { 
                 $canvas_type_redirect = strtolower(str_replace(" ","-",($canvas_data['default_title'])));
                ?>
                
                <input type="text" id="width_custom<?php echo $i;?>" data-title="<?php echo $canvas_type_redirect?>"
                data-width-border="<?php echo $canvas_data['width']?>">
                
            <?php
            $i++;
            }            
            ?>    
            

        </div>
        <!-- color Picker box -->
        <!-- <div class="color_picker_box">
            <button type="button" class="close_low_res_popup" aria-label="Close">
                <span aria-hidden="true">Color Picker</span><img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/minimize-icon.png" alt="Minimize Icon">
            </button>
            <input type="text" id="for_color_picker">
        </div> -->
        <!-- low resolution modal -->
        <div class="modal low_resolution_modal">
            <div class="low-res-modal">
                <div class="header">
                    <h2>Low resolution</h2>
                </div>
                <div class="content">
                    <img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/low_alert.jpg" alt="">
                    <div class="text-wrap">
                        <p>The resolution of your photo is too low and may appear grainy or pixelated when printed.</p>
                    </div>
                </div>
                <button type="button" class="close_low_res_popup" aria-label="Close">
                    <span aria-hidden="true">Close</span><img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/minimize-icon.png" alt="Minimize Icon">
                </button>
            </div>
        </div>

         <!-- save MOdal -->
        <div class="modal saveMOdal">
            <div class="low-res-modal">
                <div class="header">
                    <h2>Save Canvas</h2>
                </div>
                <div class="content">
                    <ul class="save_modal_list">
                        <li><input type="text" id="saveName" placeholder="Enter a canvas name"></li>
                        <li><button class="saveCanvas"> Save </button></li>
                    </ul>
                    <div class="text-wrap">
                        <p>* The canvas will be saved by this Name</p>
                    </div>
                </div>
                <button type="button" class="close_low_res_popup" aria-label="Close">
                    <span aria-hidden="true">Minimize</span><img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/minimize-icon.png" alt="Minimize Icon">
                </button>
            </div>
        </div>
        <!-- layer -->
        <!-- <div class="layerBox layerHidden">
            <button type="button" class="close_low_res_popup" aria-label="Close">
                <span aria-hidden="true">Layers</span><img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/minimize-icon.png" alt="Minimize Icon">
            </button>
            <h4 class="LayerHeader"> Layers </h4>
            <ul class="layerItems"></ul>
        </div> -->
        <!-- Editor Header -->
        <div class="editor-header">
            <div class="col-lg-4 col-md-3 col-sm-4 col-xs-12">
                <div class="logo">
                    <img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/small-logo.png" alt="Logo">
                </div>
            </div>
            <div class="col-lg-4 col-md-5 col-sm-4 col-xs-12 no-padding">
                <div class="editor-middle-text dropdown">
                    Custom Canvas Prints <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">(8x8” + $30.67)<i class="fa fa-angle-down" aria-hidden="true"></i></a>
                    <ul class="dropdown-menu">
                        <li id="canvastype">
                            8X8” Thin wrap gallery (0.754)
                            <div class="pull-right">
                                <a href="javascript:void(0)">$6.69</a>
                                <a href="javascript:void(0)" class="icon"><img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/edit.png" alt="Edit"></a>
                            </div>
                        </li>
                        <!-- <li  id="styleType">
                            <span>Black Frame </span>
                            <div class="pull-right">
                                <a href="#">$9.99</a>
                                <a href="#" class="icon"><img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/remove.png" alt="Remove"></a>
                            </div>
                        </li>
                        <li  id="addon_retouching">
                            <span>Minor Photo Retouching </span>
                            <div class="pull-right">
                                <a href="#">$9.99</a>
                                <a href="#" class="icon"><img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/remove.png" alt="Remove"></a>
                            </div>
                        </li>
                        <li  id="addon_lamination">
                            <span>Lamination </span>
                            <div class="pull-right">
                                <a href="#">$4.00</a>
                                <a href="#" class="icon"><img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/remove.png" alt="Remove"></a>
                            </div>
                        </li> -->
                        <li class="subtotal">
                            <span class="title">Subtotal</span>
                            <span class="price">$30.67</span>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12 no-padding">
                <div class="editor-top-menu">
                    <ul class="list-unstyled">
                        <li>
                            <a href="javascript:void(0)" data-toggle="modal" data-target=".how-to-design-video">How to Design?</a>
                        </li>
                        <li class="order" id="order_now">
                            <a href="javascript:void(0)">Order Now</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- How To Design Popup Video -->
        <div class="modal fade how-to-design-video" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
            <div class="modal-dialog">
                <div class="modal-content">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">Minimize</span><img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/minimize-icon.png" alt="Minimize Icon">
                    </button>
                    <iframe width="700" height="500" src="https://www.youtube.com/embed/uXATjvr_rl4" frameborder="0" allowfullscreen></iframe>
                </div>
            </div>
        </div>
        <!-- Editor Main Content -->
        <div class="editor-main-content">

            <!-- Editor Sidebar -->
            <div class="editor-sidebar">
                    <div class="overlay"></div>
                <ul class="list-unstyled">
                    <li>
                       <!-- Size Panel -->
                        <?php echo $this->getLayout()->createBlock('core/template')->setTemplate('canvassignages_liveeditor/custom-canvas-print/live-editor-size-canvas.phtml')->toHtml(); ?>
                    </li>
                    <li>
                        <!--Image Panel-->
                        <?php echo $this->getLayout()->createBlock('core/template')->setTemplate('canvassignages_liveeditor/custom-canvas-print/live-editor-image.phtml')->toHtml(); ?>
                    </li>
                    <li class="for_styles_tab">
                        <!--Style Panel-->
                        <?php echo $this->getLayout()->createBlock('core/template')->setTemplate('canvassignages_liveeditor/custom-canvas-print/live-editor-style.phtml')->toHtml(); ?>
                    </li>
                    <li>
                        <!--Text Panel-->
                        <?php echo $this->getLayout()->createBlock('core/template')->setTemplate('canvassignages_liveeditor/custom-canvas-print/live-editor-text.phtml')->toHtml(); ?>
                    </li>
                    <li>
                        <!--Addon Panel-->
                        <?php echo $this->getLayout()->createBlock('core/template')->setTemplate('canvassignages_liveeditor/custom-canvas-print/live-editor-addon.phtml')->toHtml(); ?>
                    </li>
                </ul>
            </div>
            <!-- Editor Screen -->
            <div class="edit-screen-container">
                <div class="edit-screen">
                    <div class="loading_img">
                        <img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/loading.gif" alt="">
                    </div>
                    <div class="edit-screen-outer">
                        <!-- Main canvas area -->
                        <div class="image canvasWrap">
                            <!-- <img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/edit-screen-image.jpg" alt="Edit Screen"> -->
                            <!-- <div class="edit-text">
                            DRAG PHOTO HERE
                        </div> -->
                            <canvas id="mainCanvas" width="500" height="500"></canvas>
                        </div>
                    </div>
                    <div class="design-view-container">
                        <div class="roomCanvasImg"><img src="" alt=""></div>
                        <img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/design-view.jpg">
                    </div>
                    <div class="view-menu">
                        <ul class="list-unstyled">
                            <li class="active">
                                <a class="room-view" href="javascript:void(0)">Design View</a>
                            </li>
                            <li>
                                <a class="design-view" href="javascript:void(0)">Room View</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="edit-menu">
                    <ul class="list-unstyled">
                        <li class="undo_obj">
                            <label><span>Undo</span></label>
                            <a href="javascript:void(0)">
                                <img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/undo.png" alt="Edit Icon">
                            </a>
                        </li>
                        <li class="redo_obj">
                            <label><span>Redo</span></label>
                            <a href="javascript:void(0)">
                                <img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/redo.png" alt="Edit Icon">
                            </a>
                        </li>
                        <li class="save_it" id="save_it_liveeditor">
                            <label><span>Save</span></label>
                            <a href="javascript:void(0)">
                                <img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/save.png" alt="Edit Icon">
                            </a>
                        </li>
                        <li class="preview-button">
                            <label><span>3D Preview</span></label>
                            <a href="javascript:void(0)">
                                <img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/3D.png" alt="Edit Icon">
                            </a>
                            <div class="preview-box">
                                <ul class="list-unstyled">
                                    <li class="main-title">3D Preview</li>
                                    <li id="prev_top_left">
                                        <a href="javascript:void(0)">
                                            <img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/preview-top-left.png" alt="Preview Image">
                                        </a>
                                        <div class="preview-title">Top Left</div>
                                    </li>
                                    <li id="prev_top_right">
                                        <a href="javascript:void(0)">
                                            <img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/preview-top-right.png" alt="Preview Image">
                                        </a>
                                        <div class="preview-title">Top Right</div>
                                    </li>
                                    <li id="prev_left_bottom">
                                        <a href="javascript:void(0)">
                                            <img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/preview-left-bottom.png" alt="Preview Image">
                                        </a>
                                        <div class="preview-title">Left Bottom</div>
                                    </li>
                                    <li id="prev_right_bottom">
                                        <a href="javascript:void(0)">
                                            <img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/preview-right-bottom.png" alt="Preview Image">
                                        </a>
                                        <div class="preview-title">Right Bottom</div>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="for_zoom_in">
                            <label><span>Zoom In</span></label>
                            <a href="javascript:void(0)">
                                <img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/zoom-in.png" alt="Edit Icon">
                            </a>
                        </li>
                        <li class="for_zoom_out">
                            <label><span>Zoom Out</span></label>
                            <a href="javascript:void(0)">
                                <img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/zoom-out.png" alt="Edit Icon">
                            </a>
                        </li>
                        <li class="for_help">
                            <label><span>Help</span></label>
                            <a href="javascript:void(0)">
                                <img src="<?php echo $skin_url?>frontend/rwd/default/images/canvas_live_editor/images/help.png" alt="Edit Icon">
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- Photo Upload Popup -->
        <?php echo $this->getLayout()->createBlock('core/template')->setTemplate('canvassignages_liveeditor/custom-canvas-print/live-editor-uploader.phtml')->toHtml(); ?>
        <!-- Photo Upload Popup End-->

        <!-- Javascript -->
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
        <!-- jquery ui -->
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <script type="text/javascript" src="<?php echo $skin_url?>frontend/revivalpixel/canvas/js/canvas_live_editor/bootstrap.js"></script>
        
        <!-- fabric -->
        <script src="<?php echo $skin_url?>frontend/revivalpixel/canvas/js/canvas_live_editor/fabric.min.js"></script><script src="<?php echo $skin_url?>frontend/revivalpixel/canvas/js/canvas_live_editor/color-picker.min.js"></script>
        <script type="text/javascript" src="<?php echo $skin_url?>frontend/revivalpixel/canvas/js/canvas_live_editor/jquery.filterme.js"></script>
        <script type="text/javascript" src="<?php echo $skin_url?>frontend/revivalpixel/canvas/js/canvas_live_editor/custom_editor.js"></script>    
        <script src="<?php echo $skin_url?>frontend/revivalpixel/canvas/js/canvas_live_editor/bootstrap-colorpicker.js"></script>   
        <script type="text/javascript" src="<?php echo $skin_url?>frontend/revivalpixel/canvas/js/canvas_live_editor/jquery.slimscroll.js"></script>
        <script type="text/javascript" src="<?php echo $skin_url?>frontend/revivalpixel/canvas/js/canvas_live_editor/index.js"></script>

        <script type="text/javascript">
        // photo filter
        jQuery(document).ready(function($) {
           $('.filter').filterMe();
        });
        // Sidebar JS
        $(".editor-sidebar li a").click(function() {
            $(this).parent().addClass('selected').siblings().removeClass('selected');
        });
        $(document).click(function(e) {
            var targetbox = $('.editor-sidebar li');
            if (!targetbox.is(e.target) && targetbox.has(e.target).length === 0) {
                $('.editor-sidebar li').removeClass("selected");
            }
        });
        
        // Popup Photo Select Js
        $(".my-photos-image-box").click(function() {
            $(this).addClass('select').siblings().removeClass('select');
        });
        // Sidebar Photo Select Js
        $(".uploaded-photo-box").click(function() {
            $(this).addClass('select').siblings().removeClass('select');
        });
        // Sidebar Style Photo Select Js
        $(".sidebar-content.style .tab-content li").click(function() {
            $(this).addClass('active').siblings().removeClass('active');
        });
        // Sidebar Addon Photo Select Js
        $(".sidebar-content.addon .panel-body li").click(function() {
            $(this).addClass('active').siblings().removeClass('active');
        });
        //View Menu Js 
        $(".view-menu li").click(function() {
            $(this).addClass('active').siblings().removeClass('active');
        });
        $(".view-menu a.design-view").click(function() {
            $('body').addClass('design-view-open');
        });
        $(".view-menu a.room-view").click(function() {
            $('body').removeClass('design-view-open');
        });
        // 3D Prview Icon JS
        $(".preview-button").click(function() {
            $(this).addClass('active').siblings().removeClass('active');
        });
        $(document).click(function(e) {
            var targetbox = $('.preview-button');
            if (!targetbox.is(e.target) && targetbox.has(e.target).length === 0) {
                $('.preview-button').removeClass("active");
            }
        });
        // Smooth Scroll js
        $('.sidebar-content').slimscroll({
            height: '100%'
        });
        
        
        //Save Button Action Added By Shourya
        //var url = '<?php //echo  Mage::getUrl('editorsaveddata/index')?>';
        //Save_ajax(url);
        
   //      $('#save_it_liveeditor').click(function() {
            
            
            // //alert(url);
            
                
            // });
        
        </script>
        
        <!--Added Custom Js-->
        <script>
    
            $(document).ready(function() {
                $('#photo-uplopad .modal-body > ul li:nth-of-type(2)').on('click',function() 
                {
                    $('.preloader_image').show();
                    var url = '<?php echo  Mage::getUrl('uploader/index/showimages')?>';
                    $.ajax({
                            url: url,                   
                            type: "POST",
                            success: function(response)
                            {
                                $('.preloader_image').fadeOut();    
                            
                                //console.log(response);
                                $('.my-photos').html(response);
                            
                                 $('.fileuploader-items-list li').remove();
                                 $('.fileuploader-input-caption span').text('Choose files to upload');
                                 jQuery('#my-photo .button-group button.button.medium.border:first-child').text('Select All');
                            }
                        });
                    
                    });
                    
                    $(document).on('click','.resized_remove',function() {
                        var t = $(this);
                        var url = '<?php echo  Mage::getUrl('uploader/index/removeimages')?>';
                        
                        var remove_url =$(this).attr('data-img-src') ;
                        var remove_url_root =$(this).attr('data-img-root-src') ;
                        //alert(remove_url);
                        
                        $.ajax({
                            url: url,
                            data: {remove_url:remove_url,remove_url_root:remove_url_root},
                            type: "POST",
                            success: function(response)
                            {
                                t.parent().remove();
                            
                                console.log(t);
                            
                            
                            
                            }
                        });
                    });
                    
                    $('#my-photo .button-group button.button.medium.border:nth-of-type(2)').on('click',function(){  
                        if($('.my-photos-image-box.select').length > 0){}else{ alert('Please Select a picture!'); return false; }                   
                        $('.my-photos-image-box.select').each(function(){
                            var t = $(this);
                            var url = '<?php echo  Mage::getUrl('uploader/index/removeimages')?>';
                            var remove_url = $(this).find('.resized_remove').attr('data-img-src') ;
                            var remove_url_root =$(this).find('.resized_remove').attr('data-img-root-src') ;
                            $.ajax({
                                url: url,
                                data: {remove_url:remove_url,remove_url_root:remove_url_root},
                                type: "POST",
                                success: function(response)
                                {
                                    t.remove();
                                
                                    console.log(t);
                                
                                
                                
                                }
                            });
                        });
                    });
                    var ursl = '<?php echo  Mage::getUrl('uploader/index/allimages')?>';
                    jQuery('.add_selected_button').attr('data-send-url', ursl);
                    
                   
                    
                    // jQuery('.add_selected_button').on('click',function (argument) {
                        
                    //  $('.my-photos-image-box.select').each(function(){
                            
                    //      var url = '<?php echo  Mage::getUrl('uploader/index/allimages')?>';
                    //      var original_url = $(this).find('.resized_remove').attr('data-original-src') ;
                    //      var resized_url =$(this).find('.main_img').attr('src') ;
                            
                    //      $.ajax({
                    //          url: url,
                    //          data: {original_url:original_url,resized_url:resized_url},
                    //          type: "POST",
                    //          success: function(response)
                    //          {
                    //              //alert(response);
                                    
                    //              $('.uploaded-image').append(response);                          
                    //          }
                    //      });
                            
                            
                    //  }); 
                        
                    // });
                    
                    
                });
    
        </script>  
        <img id="canvas_image" />
    </body>

</html>
